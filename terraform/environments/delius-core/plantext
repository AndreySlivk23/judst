
Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  [32m+[0m create[0m
  [33m~[0m update in-place[0m
 [36m<=[0m read (data resources)[0m

Terraform will perform the following actions:

[1m  # module.environment_dev[0].aws_iam_role_policy.oracledb_backup_bucket_access_policy[0m will be updated in-place
[0m  [33m~[0m[0m resource "aws_iam_role_policy" "oracledb_backup_bucket_access_policy" {
        id     = "dev-delius-db-ec2_instance:dev-oracledb-backup-bucket-access-policy"
        name   = "dev-oracledb-backup-bucket-access-policy"
      [33m~[0m[0m policy = jsonencode(
          [33m~[0m[0m {
              [33m~[0m[0m Statement = [
                  [33m~[0m[0m {
                      [33m~[0m[0m Action   = [
                          [31m-[0m[0m "s3:*",
                          [32m+[0m[0m "s3:PutObject",
                          [32m+[0m[0m "s3:GetObject",
                        ]
                      [33m~[0m[0m Resource = [
                          [31m-[0m[0m "arn:aws:s3:::dev-oracle-database-backups",
                          [31m-[0m[0m "arn:aws:s3:::dev-oracle-database-backups/*",
                        ] [33m->[0m[0m "arn:aws:s3:::dev-oracle-database-backups*/*"
                      [31m-[0m[0m Sid      = "allowAccessToOracleDbBackupBucket"
                        [90m# (1 unchanged attribute hidden)[0m[0m
                    },
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = "s3:ListBucket"
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "arn:aws:s3:::dev-oracle-database-backups"
                    },
                ]
                [90m# (1 unchanged attribute hidden)[0m[0m
            }
        )
        [90m# (1 unchanged attribute hidden)[0m[0m
    }

[1m  # module.environment_test[0].data.aws_iam_policy_document.ecs_s3[0m will be read during apply
  # (config refers to values not yet known)
[0m [36m<=[0m[0m data "aws_iam_policy_document" "ecs_s3" {
      [32m+[0m[0m id   = (known after apply)
      [32m+[0m[0m json = (known after apply)

      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3:*",
            ]
          [32m+[0m[0m effect    = "Allow"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
            ]
        }
    }

[1m  # module.environment_test[0].data.aws_iam_policy_document.migration_s3[0m will be read during apply
  # (config refers to values not yet known)
[0m [36m<=[0m[0m data "aws_iam_policy_document" "migration_s3" {
      [32m+[0m[0m id   = (known after apply)
      [32m+[0m[0m json = (known after apply)

      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3:GetObject",
              [32m+[0m[0m "s3:HeadBucket",
              [32m+[0m[0m "s3:HeadObject",
              [32m+[0m[0m "s3:ListBucket",
            ]
          [32m+[0m[0m effect    = "Allow"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
            ]
          [32m+[0m[0m sid       = "CustomPolicyActions"
        }
    }

[1m  # module.environment_test[0].data.aws_iam_policy_document.oracledb_backup_bucket_access[0m will be read during apply
  # (config refers to values not yet known)
[0m [36m<=[0m[0m data "aws_iam_policy_document" "oracledb_backup_bucket_access" {
      [32m+[0m[0m id   = (known after apply)
      [32m+[0m[0m json = (known after apply)

      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3:GetObject",
              [32m+[0m[0m "s3:PutObject",
            ]
          [32m+[0m[0m effect    = "Allow"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
            ]
        }
      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3:ListBucket",
            ]
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
            ]
        }
    }

[1m  # module.environment_test[0].data.aws_secretsmanager_secret.delius_core_ldap_credential[0m will be read during apply
  # (depends on a resource or a module with changes pending)
[0m [36m<=[0m[0m data "aws_secretsmanager_secret" "delius_core_ldap_credential" {
      [32m+[0m[0m arn         = (known after apply)
      [32m+[0m[0m description = (known after apply)
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m kms_key_id  = (known after apply)
      [32m+[0m[0m name        = "delius-core-test-openldap-bind-password"
      [32m+[0m[0m policy      = (known after apply)
      [32m+[0m[0m tags        = (known after apply)
    }

[1m  # module.environment_test[0].data.aws_ssm_parameter.delius_core_frontend_env_var_dev_password[0m will be read during apply
  # (depends on a resource or a module with changes pending)
[0m [36m<=[0m[0m data "aws_ssm_parameter" "delius_core_frontend_env_var_dev_password" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m name           = "/delius-core/test/DEV_PASSWORD"
      [32m+[0m[0m type           = (known after apply)
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].data.aws_ssm_parameter.delius_core_frontend_env_var_dev_username[0m will be read during apply
  # (depends on a resource or a module with changes pending)
[0m [36m<=[0m[0m data "aws_ssm_parameter" "delius_core_frontend_env_var_dev_username" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m name           = "/delius-core/test/DEV_USERNAME"
      [32m+[0m[0m type           = (known after apply)
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].data.aws_ssm_parameter.delius_core_frontend_env_var_eis_user_context[0m will be read during apply
  # (depends on a resource or a module with changes pending)
[0m [36m<=[0m[0m data "aws_ssm_parameter" "delius_core_frontend_env_var_eis_user_context" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m name           = "/delius-core/test/EIS_USER_CONTEXT"
      [32m+[0m[0m type           = (known after apply)
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].data.aws_ssm_parameter.delius_core_frontend_env_var_jdbc_password[0m will be read during apply
  # (depends on a resource or a module with changes pending)
[0m [36m<=[0m[0m data "aws_ssm_parameter" "delius_core_frontend_env_var_jdbc_password" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m name           = "/delius-core/test/JCBC_PASSWORD"
      [32m+[0m[0m type           = (known after apply)
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].data.aws_ssm_parameter.delius_core_frontend_env_var_jdbc_url[0m will be read during apply
  # (depends on a resource or a module with changes pending)
[0m [36m<=[0m[0m data "aws_ssm_parameter" "delius_core_frontend_env_var_jdbc_url" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m name           = "/delius-core/test/JCBC_URL"
      [32m+[0m[0m type           = (known after apply)
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].data.aws_ssm_parameter.delius_core_frontend_env_var_ldap_host[0m will be read during apply
  # (depends on a resource or a module with changes pending)
[0m [36m<=[0m[0m data "aws_ssm_parameter" "delius_core_frontend_env_var_ldap_host" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/LDAP_HOST"
      [32m+[0m[0m type           = (known after apply)
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].data.aws_ssm_parameter.delius_core_frontend_env_var_test_mode[0m will be read during apply
  # (depends on a resource or a module with changes pending)
[0m [36m<=[0m[0m data "aws_ssm_parameter" "delius_core_frontend_env_var_test_mode" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m name           = "/delius-core/test/TEST_MODE"
      [32m+[0m[0m type           = (known after apply)
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].data.aws_ssm_parameter.delius_core_frontend_env_var_user_context[0m will be read during apply
  # (depends on a resource or a module with changes pending)
[0m [36m<=[0m[0m data "aws_ssm_parameter" "delius_core_frontend_env_var_user_context" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m name           = "/delius-core/test/USER_CONTEXT"
      [32m+[0m[0m type           = (known after apply)
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].data.aws_ssm_parameter.delius_core_ldap_principal[0m will be read during apply
  # (depends on a resource or a module with changes pending)
[0m [36m<=[0m[0m data "aws_ssm_parameter" "delius_core_ldap_principal" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/LDAP_PRINCIPAL"
      [32m+[0m[0m type           = (known after apply)
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_acm_certificate.external[0m will be created
[0m  [32m+[0m[0m resource "aws_acm_certificate" "external" {
      [32m+[0m[0m arn                       = (known after apply)
      [32m+[0m[0m domain_name               = "modernisation-platform.service.justice.gov.uk"
      [32m+[0m[0m domain_validation_options = [
          [32m+[0m[0m {
              [32m+[0m[0m domain_name           = "delius-core.test.hmpps-development.modernisation-platform.service.justice.gov.uk"
              [32m+[0m[0m resource_record_name  = (known after apply)
              [32m+[0m[0m resource_record_type  = (known after apply)
              [32m+[0m[0m resource_record_value = (known after apply)
            },
          [32m+[0m[0m {
              [32m+[0m[0m domain_name           = "modernisation-platform.service.justice.gov.uk"
              [32m+[0m[0m resource_record_name  = (known after apply)
              [32m+[0m[0m resource_record_type  = (known after apply)
              [32m+[0m[0m resource_record_value = (known after apply)
            },
        ]
      [32m+[0m[0m id                        = (known after apply)
      [32m+[0m[0m key_algorithm             = (known after apply)
      [32m+[0m[0m not_after                 = (known after apply)
      [32m+[0m[0m not_before                = (known after apply)
      [32m+[0m[0m pending_renewal           = (known after apply)
      [32m+[0m[0m renewal_eligibility       = (known after apply)
      [32m+[0m[0m renewal_summary           = (known after apply)
      [32m+[0m[0m status                    = (known after apply)
      [32m+[0m[0m subject_alternative_names = [
          [32m+[0m[0m "delius-core.test.hmpps-development.modernisation-platform.service.justice.gov.uk",
          [32m+[0m[0m "modernisation-platform.service.justice.gov.uk",
        ]
      [32m+[0m[0m tags                      = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all                  = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m type                      = (known after apply)
      [32m+[0m[0m validation_emails         = (known after apply)
      [32m+[0m[0m validation_method         = "DNS"
    }

[1m  # module.environment_test[0].aws_acm_certificate_validation.external[0m will be created
[0m  [32m+[0m[0m resource "aws_acm_certificate_validation" "external" {
      [32m+[0m[0m certificate_arn         = (known after apply)
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m validation_record_fqdns = (known after apply)
    }

[1m  # module.environment_test[0].aws_backup_plan.ldap_backup_plan[0m will be created
[0m  [32m+[0m[0m resource "aws_backup_plan" "ldap_backup_plan" {
      [32m+[0m[0m arn      = (known after apply)
      [32m+[0m[0m id       = (known after apply)
      [32m+[0m[0m name     = "test-ldap-efs-backup-plan"
      [32m+[0m[0m tags     = {
          [32m+[0m[0m "Name"                    = "test-ldap-efs-backup-plan"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all = {
          [32m+[0m[0m "Name"                    = "test-ldap-efs-backup-plan"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m version  = (known after apply)

      [32m+[0m[0m rule {
          [32m+[0m[0m completion_window        = 180
          [32m+[0m[0m enable_continuous_backup = false
          [32m+[0m[0m rule_name                = "test-ldap-efs-backup-retain-30-days"
          [32m+[0m[0m schedule                 = "cron(0 19 * * ? *)"
          [32m+[0m[0m start_window             = 60
          [32m+[0m[0m target_vault_name        = "test-ldap-efs-backup-vault"

          [32m+[0m[0m lifecycle {
              [32m+[0m[0m delete_after = 30
            }
        }
    }

[1m  # module.environment_test[0].aws_backup_selection.efs_backup[0m will be created
[0m  [32m+[0m[0m resource "aws_backup_selection" "efs_backup" {
      [32m+[0m[0m iam_role_arn  = (known after apply)
      [32m+[0m[0m id            = (known after apply)
      [32m+[0m[0m name          = "test-ldap-efs"
      [32m+[0m[0m not_resources = (known after apply)
      [32m+[0m[0m plan_id       = (known after apply)
      [32m+[0m[0m resources     = (known after apply)
    }

[1m  # module.environment_test[0].aws_backup_vault.ldap_backup_vault[0m will be created
[0m  [32m+[0m[0m resource "aws_backup_vault" "ldap_backup_vault" {
      [32m+[0m[0m arn             = (known after apply)
      [32m+[0m[0m force_destroy   = false
      [32m+[0m[0m id              = (known after apply)
      [32m+[0m[0m kms_key_arn     = (known after apply)
      [32m+[0m[0m name            = "test-ldap-efs-backup-vault"
      [32m+[0m[0m recovery_points = (known after apply)
      [32m+[0m[0m tags            = {
          [32m+[0m[0m "Name"                    = "test-ldap-efs-backup-vault"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all        = {
          [32m+[0m[0m "Name"                    = "test-ldap-efs-backup-vault"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
    }

[1m  # module.environment_test[0].aws_cloudwatch_log_group.delius_core_frontend_log_group[0m will be created
[0m  [32m+[0m[0m resource "aws_cloudwatch_log_group" "delius_core_frontend_log_group" {
      [32m+[0m[0m arn               = (known after apply)
      [32m+[0m[0m id                = (known after apply)
      [32m+[0m[0m name              = "test-delius-core-testing-frontend"
      [32m+[0m[0m name_prefix       = (known after apply)
      [32m+[0m[0m retention_in_days = 7
      [32m+[0m[0m skip_destroy      = false
      [32m+[0m[0m tags              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all          = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
    }

[1m  # module.environment_test[0].aws_cloudwatch_log_group.delius_core_testing_db_log_group[0m will be created
[0m  [32m+[0m[0m resource "aws_cloudwatch_log_group" "delius_core_testing_db_log_group" {
      [32m+[0m[0m arn               = (known after apply)
      [32m+[0m[0m id                = (known after apply)
      [32m+[0m[0m name              = "test-test-db"
      [32m+[0m[0m name_prefix       = (known after apply)
      [32m+[0m[0m retention_in_days = 7
      [32m+[0m[0m skip_destroy      = false
      [32m+[0m[0m tags              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all          = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
    }

[1m  # module.environment_test[0].aws_cloudwatch_log_group.ldap[0m will be created
[0m  [32m+[0m[0m resource "aws_cloudwatch_log_group" "ldap" {
      [32m+[0m[0m arn               = (known after apply)
      [32m+[0m[0m id                = (known after apply)
      [32m+[0m[0m name              = "test-ldap-ecs"
      [32m+[0m[0m name_prefix       = (known after apply)
      [32m+[0m[0m retention_in_days = 30
      [32m+[0m[0m skip_destroy      = false
      [32m+[0m[0m tags_all          = (known after apply)
    }

[1m  # module.environment_test[0].aws_cloudwatch_log_group.ldap_test[0m will be created
[0m  [32m+[0m[0m resource "aws_cloudwatch_log_group" "ldap_test" {
      [32m+[0m[0m arn               = (known after apply)
      [32m+[0m[0m id                = (known after apply)
      [32m+[0m[0m name              = "/ecs/ldap_test"
      [32m+[0m[0m name_prefix       = (known after apply)
      [32m+[0m[0m retention_in_days = 7
      [32m+[0m[0m skip_destroy      = false
      [32m+[0m[0m tags_all          = (known after apply)
    }

[1m  # module.environment_test[0].aws_efs_access_point.ldap[0m will be created
[0m  [32m+[0m[0m resource "aws_efs_access_point" "ldap" {
      [32m+[0m[0m arn             = (known after apply)
      [32m+[0m[0m file_system_arn = (known after apply)
      [32m+[0m[0m file_system_id  = (known after apply)
      [32m+[0m[0m id              = (known after apply)
      [32m+[0m[0m owner_id        = (known after apply)
      [32m+[0m[0m tags            = {
          [32m+[0m[0m "Name"                    = "test-ldap-efs-access-point"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all        = {
          [32m+[0m[0m "Name"                    = "test-ldap-efs-access-point"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }

      [32m+[0m[0m root_directory {
          [32m+[0m[0m path = "/"
        }
    }

[1m  # module.environment_test[0].aws_efs_file_system.ldap[0m will be created
[0m  [32m+[0m[0m resource "aws_efs_file_system" "ldap" {
      [32m+[0m[0m arn                     = (known after apply)
      [32m+[0m[0m availability_zone_id    = (known after apply)
      [32m+[0m[0m availability_zone_name  = (known after apply)
      [32m+[0m[0m creation_token          = "test-ldap"
      [32m+[0m[0m dns_name                = (known after apply)
      [32m+[0m[0m encrypted               = true
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m kms_key_id              = "arn:aws:kms:eu-west-2:374269020027:key/90121e65-c5fa-43a9-8075-6f3410d2a025"
      [32m+[0m[0m name                    = (known after apply)
      [32m+[0m[0m number_of_mount_targets = (known after apply)
      [32m+[0m[0m owner_id                = (known after apply)
      [32m+[0m[0m performance_mode        = (known after apply)
      [32m+[0m[0m size_in_bytes           = (known after apply)
      [32m+[0m[0m tags                    = {
          [32m+[0m[0m "Name"                    = "test-ldap-efs"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all                = {
          [32m+[0m[0m "Name"                    = "test-ldap-efs"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m throughput_mode         = "bursting"
    }

[1m  # module.environment_test[0].aws_efs_mount_target.ldap["subnet-0131824ef5a4ece01"][0m will be created
[0m  [32m+[0m[0m resource "aws_efs_mount_target" "ldap" {
      [32m+[0m[0m availability_zone_id   = (known after apply)
      [32m+[0m[0m availability_zone_name = (known after apply)
      [32m+[0m[0m dns_name               = (known after apply)
      [32m+[0m[0m file_system_arn        = (known after apply)
      [32m+[0m[0m file_system_id         = (known after apply)
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_address             = (known after apply)
      [32m+[0m[0m mount_target_dns_name  = (known after apply)
      [32m+[0m[0m network_interface_id   = (known after apply)
      [32m+[0m[0m owner_id               = (known after apply)
      [32m+[0m[0m security_groups        = (known after apply)
      [32m+[0m[0m subnet_id              = "subnet-0131824ef5a4ece01"
    }

[1m  # module.environment_test[0].aws_efs_mount_target.ldap["subnet-01815760b71d6a619"][0m will be created
[0m  [32m+[0m[0m resource "aws_efs_mount_target" "ldap" {
      [32m+[0m[0m availability_zone_id   = (known after apply)
      [32m+[0m[0m availability_zone_name = (known after apply)
      [32m+[0m[0m dns_name               = (known after apply)
      [32m+[0m[0m file_system_arn        = (known after apply)
      [32m+[0m[0m file_system_id         = (known after apply)
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_address             = (known after apply)
      [32m+[0m[0m mount_target_dns_name  = (known after apply)
      [32m+[0m[0m network_interface_id   = (known after apply)
      [32m+[0m[0m owner_id               = (known after apply)
      [32m+[0m[0m security_groups        = (known after apply)
      [32m+[0m[0m subnet_id              = "subnet-01815760b71d6a619"
    }

[1m  # module.environment_test[0].aws_efs_mount_target.ldap["subnet-04af8bd9dbbce3310"][0m will be created
[0m  [32m+[0m[0m resource "aws_efs_mount_target" "ldap" {
      [32m+[0m[0m availability_zone_id   = (known after apply)
      [32m+[0m[0m availability_zone_name = (known after apply)
      [32m+[0m[0m dns_name               = (known after apply)
      [32m+[0m[0m file_system_arn        = (known after apply)
      [32m+[0m[0m file_system_id         = (known after apply)
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_address             = (known after apply)
      [32m+[0m[0m mount_target_dns_name  = (known after apply)
      [32m+[0m[0m network_interface_id   = (known after apply)
      [32m+[0m[0m owner_id               = (known after apply)
      [32m+[0m[0m security_groups        = (known after apply)
      [32m+[0m[0m subnet_id              = "subnet-04af8bd9dbbce3310"
    }

[1m  # module.environment_test[0].aws_iam_instance_profile.db_ec2_instanceprofile[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_instance_profile" "db_ec2_instanceprofile" {
      [32m+[0m[0m arn         = (known after apply)
      [32m+[0m[0m create_date = (known after apply)
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m name        = "test-delius-db-ec2_instance_iam_role"
      [32m+[0m[0m name_prefix = (known after apply)
      [32m+[0m[0m path        = "/"
      [32m+[0m[0m role        = "test-delius-db-ec2_instance"
      [32m+[0m[0m tags_all    = (known after apply)
      [32m+[0m[0m unique_id   = (known after apply)
    }

[1m  # module.environment_test[0].aws_iam_policy.business_unit_kms_key_access[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_policy" "business_unit_kms_key_access" {
      [32m+[0m[0m arn         = (known after apply)
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m name        = "test-delius-db-business_unit_kms_key_access_policy"
      [32m+[0m[0m name_prefix = (known after apply)
      [32m+[0m[0m path        = "/"
      [32m+[0m[0m policy      = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "kms:RevokeGrant",
                          [32m+[0m[0m "kms:ReEncrypt*",
                          [32m+[0m[0m "kms:ListGrants",
                          [32m+[0m[0m "kms:GenerateDataKey*",
                          [32m+[0m[0m "kms:Encrypt",
                          [32m+[0m[0m "kms:DescribeKey",
                          [32m+[0m[0m "kms:Decrypt",
                          [32m+[0m[0m "kms:CreateGrant",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "arn:aws:kms:eu-west-2:374269020027:key/90121e65-c5fa-43a9-8075-6f3410d2a025"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m policy_id   = (known after apply)
      [32m+[0m[0m tags        = {
          [32m+[0m[0m "Name"                    = "test-delius-db-business_unit_kms_key_access_policy"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all    = {
          [32m+[0m[0m "Name"                    = "test-delius-db-business_unit_kms_key_access_policy"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
    }

[1m  # module.environment_test[0].aws_iam_policy.core_shared_services_bucket_access[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_policy" "core_shared_services_bucket_access" {
      [32m+[0m[0m arn         = (known after apply)
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m name        = "test-delius-db-core_shared_services_bucket_access_policy"
      [32m+[0m[0m name_prefix = (known after apply)
      [32m+[0m[0m path        = "/"
      [32m+[0m[0m policy      = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "s3:ListBucket",
                          [32m+[0m[0m "s3:GetObject",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = [
                          [32m+[0m[0m "arn:aws:s3:::mod-platform-image-artefact-bucket*/*",
                          [32m+[0m[0m "arn:aws:s3:::mod-platform-image-artefact-bucket*",
                        ]
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m policy_id   = (known after apply)
      [32m+[0m[0m tags        = {
          [32m+[0m[0m "Name"                    = "test-delius-db-core_shared_services_bucket_access_policy"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all    = {
          [32m+[0m[0m "Name"                    = "test-delius-db-core_shared_services_bucket_access_policy"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
    }

[1m  # module.environment_test[0].aws_iam_policy.ec2_access_for_ansible[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_policy" "ec2_access_for_ansible" {
      [32m+[0m[0m arn         = (known after apply)
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m name        = "test-delius-db-ec2_access_for_ansible"
      [32m+[0m[0m name_prefix = (known after apply)
      [32m+[0m[0m path        = "/"
      [32m+[0m[0m policy      = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "ec2:DescribeVolumes",
                          [32m+[0m[0m "ec2:DescribeTags",
                          [32m+[0m[0m "ec2:DescribeInstances",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "*"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m policy_id   = (known after apply)
      [32m+[0m[0m tags        = {
          [32m+[0m[0m "Name"                    = "test-delius-db-ec2_access_for_ansible"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all    = {
          [32m+[0m[0m "Name"                    = "test-delius-db-ec2_access_for_ansible"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
    }

[1m  # module.environment_test[0].aws_iam_role.db_ec2_instance_iam_role[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "db_ec2_instance_iam_role" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = "ec2.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "test-delius-db-ec2_instance"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "Name"                    = "test-delius-db-ec2_instance"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "Name"                    = "test-delius-db-ec2_instance"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m unique_id             = (known after apply)
    }

[1m  # module.environment_test[0].aws_iam_role.ldap_ecs_exec[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "ldap_ecs_exec" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = "ecs-tasks.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "test-ldap-task-exec"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m unique_id             = (known after apply)
    }

[1m  # module.environment_test[0].aws_iam_role.ldap_ecs_service[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "ldap_ecs_service" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = "ecs.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "test-ldap-service"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m unique_id             = (known after apply)
    }

[1m  # module.environment_test[0].aws_iam_role.ldap_ecs_task[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "ldap_ecs_task" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = "ecs-tasks.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "test-ldap-task"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m unique_id             = (known after apply)
    }

[1m  # module.environment_test[0].aws_iam_role.ldap_efs_backup_role[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "ldap_efs_backup_role" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = "backup.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "test-ldap-efs-backup-role"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m unique_id             = (known after apply)
    }

[1m  # module.environment_test[0].aws_iam_role_policy.business_unit_kms_key_access[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "business_unit_kms_key_access" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "business_unit_kms_key_access"
      [32m+[0m[0m policy = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "kms:RevokeGrant",
                          [32m+[0m[0m "kms:ReEncrypt*",
                          [32m+[0m[0m "kms:ListGrants",
                          [32m+[0m[0m "kms:GenerateDataKey*",
                          [32m+[0m[0m "kms:Encrypt",
                          [32m+[0m[0m "kms:DescribeKey",
                          [32m+[0m[0m "kms:Decrypt",
                          [32m+[0m[0m "kms:CreateGrant",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "arn:aws:kms:eu-west-2:374269020027:key/90121e65-c5fa-43a9-8075-6f3410d2a025"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role   = "test-delius-db-ec2_instance"
    }

[1m  # module.environment_test[0].aws_iam_role_policy.core_shared_services_bucket_access[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "core_shared_services_bucket_access" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "core_shared_services_bucket_access"
      [32m+[0m[0m policy = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "s3:ListBucket",
                          [32m+[0m[0m "s3:GetObject",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = [
                          [32m+[0m[0m "arn:aws:s3:::mod-platform-image-artefact-bucket*/*",
                          [32m+[0m[0m "arn:aws:s3:::mod-platform-image-artefact-bucket*",
                        ]
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role   = "test-delius-db-ec2_instance"
    }

[1m  # module.environment_test[0].aws_iam_role_policy.delius_core_backups[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "delius_core_backups" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "test-backup-policy"
      [32m+[0m[0m policy = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "backup:StartRestoreJob",
                          [32m+[0m[0m "backup:StartBackupJob",
                          [32m+[0m[0m "backup:ListRestoreJobs",
                          [32m+[0m[0m "backup:ListRecoveryPointsByBackupVault",
                          [32m+[0m[0m "backup:ListBackupVaults",
                          [32m+[0m[0m "backup:ListBackupPlanTemplates",
                          [32m+[0m[0m "backup:ListBackupJobs",
                          [32m+[0m[0m "backup:GetRecoveryPointRestoreMetadata",
                          [32m+[0m[0m "backup:DescribeRestoreJob",
                          [32m+[0m[0m "backup:DescribeBackupJob",
                          [32m+[0m[0m "backup:CreateBackupSelection",
                          [32m+[0m[0m "backup:CreateBackupPlan",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "*"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role   = (known after apply)
    }

[1m  # module.environment_test[0].aws_iam_role_policy.ec2_access[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "ec2_access" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "ec2_access"
      [32m+[0m[0m policy = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "ec2:DescribeVolumes",
                          [32m+[0m[0m "ec2:DescribeTags",
                          [32m+[0m[0m "ec2:DescribeInstances",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "*"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role   = "test-delius-db-ec2_instance"
    }

[1m  # module.environment_test[0].aws_iam_role_policy.ecs_exec[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "ecs_exec" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "test-ldap-task-exec"
      [32m+[0m[0m policy = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "ssm:GetParameters",
                          [32m+[0m[0m "secretsmanager:GetSecretValue",
                          [32m+[0m[0m "logs:PutLogEvents",
                          [32m+[0m[0m "logs:CreateLogStream",
                          [32m+[0m[0m "logs:CreateLogGroup",
                          [32m+[0m[0m "ecr:GetDownloadUrlForLayer",
                          [32m+[0m[0m "ecr:GetAuthorizationToken",
                          [32m+[0m[0m "ecr:BatchGetImage",
                          [32m+[0m[0m "ecr:BatchCheckLayerAvailability",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "*"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role   = (known after apply)
    }

[1m  # module.environment_test[0].aws_iam_role_policy.ecs_ssm_exec[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "ecs_ssm_exec" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "test-ldap-service-ssm-exec"
      [32m+[0m[0m policy = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "ssmmessages:OpenDataChannel",
                          [32m+[0m[0m "ssmmessages:OpenControlChannel",
                          [32m+[0m[0m "ssmmessages:CreateDataChannel",
                          [32m+[0m[0m "ssmmessages:CreateControlChannel",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "*"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role   = (known after apply)
    }

[1m  # module.environment_test[0].aws_iam_role_policy.efs_backups[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "efs_backups" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "test-efs-backup-policy"
      [32m+[0m[0m policy = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "elasticfilesystem:UpdateFileSystem",
                          [32m+[0m[0m "elasticfilesystem:UntagResource",
                          [32m+[0m[0m "elasticfilesystem:TagResource",
                          [32m+[0m[0m "elasticfilesystem:Restore",
                          [32m+[0m[0m "elasticfilesystem:PutLifecycleConfiguration",
                          [32m+[0m[0m "elasticfilesystem:PutFileSystemPolicy",
                          [32m+[0m[0m "elasticfilesystem:PutBackupPolicy",
                          [32m+[0m[0m "elasticfilesystem:DescribeTags",
                          [32m+[0m[0m "elasticfilesystem:DescribeMountTargets",
                          [32m+[0m[0m "elasticfilesystem:DescribeMountTargetSecurityGroups",
                          [32m+[0m[0m "elasticfilesystem:DescribeLifecycleConfiguration",
                          [32m+[0m[0m "elasticfilesystem:DescribeFileSystems",
                          [32m+[0m[0m "elasticfilesystem:DescribeFileSystemPolicy",
                          [32m+[0m[0m "elasticfilesystem:DescribeAccessPoints",
                          [32m+[0m[0m "elasticfilesystem:DeleteMountTarget",
                          [32m+[0m[0m "elasticfilesystem:DeleteFileSystem",
                          [32m+[0m[0m "elasticfilesystem:DeleteAccessPoint",
                          [32m+[0m[0m "elasticfilesystem:CreateMountTarget",
                          [32m+[0m[0m "elasticfilesystem:CreateFileSystem",
                          [32m+[0m[0m "elasticfilesystem:CreateAccessPoint",
                          [32m+[0m[0m "elasticfilesystem:Backup",
                          [32m+[0m[0m "efs:UntagResource",
                          [32m+[0m[0m "efs:TagResource",
                          [32m+[0m[0m "efs:DescribeTags",
                          [32m+[0m[0m "efs:DescribeFileSystems",
                          [32m+[0m[0m "efs:DescribeBackups",
                          [32m+[0m[0m "efs:DeleteBackup",
                          [32m+[0m[0m "efs:CreateTags",
                          [32m+[0m[0m "efs:CreateBackup",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "*"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role   = (known after apply)
    }

[1m  # module.environment_test[0].aws_iam_role_policy.ldap_ecs_s3[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "ldap_ecs_s3" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "test-ldap-service-s3"
      [32m+[0m[0m policy = (known after apply)
      [32m+[0m[0m role   = (known after apply)
    }

[1m  # module.environment_test[0].aws_iam_role_policy.ldap_ecs_service[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "ldap_ecs_service" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "test-ldap-service"
      [32m+[0m[0m policy = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "elasticloadbalancing:RegisterTargets",
                          [32m+[0m[0m "elasticloadbalancing:RegisterInstancesWithLoadBalancer",
                          [32m+[0m[0m "elasticloadbalancing:Describe*",
                          [32m+[0m[0m "elasticloadbalancing:DeregisterTargets",
                          [32m+[0m[0m "elasticloadbalancing:DeregisterInstancesFromLoadBalancer",
                          [32m+[0m[0m "ec2:Describe*",
                          [32m+[0m[0m "ec2:AuthorizeSecurityGroupIngress",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "*"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role   = (known after apply)
    }

[1m  # module.environment_test[0].aws_iam_role_policy.oracledb_backup_bucket_access_policy[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "oracledb_backup_bucket_access_policy" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "test-oracledb-backup-bucket-access-policy"
      [32m+[0m[0m policy = (known after apply)
      [32m+[0m[0m role   = "test-delius-db-ec2_instance"
    }

[1m  # module.environment_test[0].aws_iam_role_policy_attachment.db_ec2_instance_amazonssmmanagedinstancecore[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "db_ec2_instance_amazonssmmanagedinstancecore" {
      [32m+[0m[0m id         = (known after apply)
      [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"
      [32m+[0m[0m role       = "test-delius-db-ec2_instance"
    }

[1m  # module.environment_test[0].aws_instance.db_ec2_primary_instance[0m will be created
[0m  [32m+[0m[0m resource "aws_instance" "db_ec2_primary_instance" {
      [32m+[0m[0m ami                                  = "ami-084f5c88fe5bb9d44"
      [32m+[0m[0m arn                                  = (known after apply)
      [32m+[0m[0m associate_public_ip_address          = false
      [32m+[0m[0m availability_zone                    = (known after apply)
      [32m+[0m[0m cpu_core_count                       = (known after apply)
      [32m+[0m[0m cpu_threads_per_core                 = (known after apply)
      [32m+[0m[0m disable_api_stop                     = (known after apply)
      [32m+[0m[0m disable_api_termination              = (known after apply)
      [32m+[0m[0m ebs_optimized                        = true
      [32m+[0m[0m get_password_data                    = false
      [32m+[0m[0m host_id                              = (known after apply)
      [32m+[0m[0m host_resource_group_arn              = (known after apply)
      [32m+[0m[0m iam_instance_profile                 = "test-delius-db-ec2_instance_iam_role"
      [32m+[0m[0m id                                   = (known after apply)
      [32m+[0m[0m instance_initiated_shutdown_behavior = (known after apply)
      [32m+[0m[0m instance_lifecycle                   = (known after apply)
      [32m+[0m[0m instance_state                       = (known after apply)
      [32m+[0m[0m instance_type                        = "r6i.xlarge"
      [32m+[0m[0m ipv6_address_count                   = (known after apply)
      [32m+[0m[0m ipv6_addresses                       = (known after apply)
      [32m+[0m[0m key_name                             = "test-ec2-user-key-pair"
      [32m+[0m[0m monitoring                           = false
      [32m+[0m[0m outpost_arn                          = (known after apply)
      [32m+[0m[0m password_data                        = (known after apply)
      [32m+[0m[0m placement_group                      = (known after apply)
      [32m+[0m[0m placement_partition_number           = (known after apply)
      [32m+[0m[0m primary_network_interface_id         = (known after apply)
      [32m+[0m[0m private_dns                          = (known after apply)
      [32m+[0m[0m private_ip                           = (known after apply)
      [32m+[0m[0m public_dns                           = (known after apply)
      [32m+[0m[0m public_ip                            = (known after apply)
      [32m+[0m[0m secondary_private_ips                = (known after apply)
      [32m+[0m[0m security_groups                      = (known after apply)
      [32m+[0m[0m source_dest_check                    = true
      [32m+[0m[0m spot_instance_request_id             = (known after apply)
      [32m+[0m[0m subnet_id                            = "subnet-072949a209fe05fb3"
      [32m+[0m[0m tags                                 = {
          [32m+[0m[0m "Name"                    = "test-delius-db-1"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "database"                = "delius_primarydb"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "server-type"             = "delius_core_db"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all                             = {
          [32m+[0m[0m "Name"                    = "test-delius-db-1"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "database"                = "delius_primarydb"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "server-type"             = "delius_core_db"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tenancy                              = (known after apply)
      [32m+[0m[0m user_data                            = (known after apply)
      [32m+[0m[0m user_data_base64                     = "IyEvYmluL2Jhc2gKIyBEb24ndCBzZXQgc2V0IC11IGFzIGFuc2libGUgYWN0aXZhdGUgc2NyaXB0IGZhaWxzIHdpdGggaXQgb24gUkhFTDYKc2V0IC1lbyBwaXBlZmFpbAoKcnVuX2Fuc2libGUoKSB7CiAgZXhwb3J0IFBBVEg9L3Vzci9sb2NhbC9iaW46JFBBVEgKCiAgZWNobyAiYW5zaWJsZV9yZXBvOiAgICAgICAgIG1vZGVybmlzYXRpb24tcGxhdGZvcm0tY29uZmlndXJhdGlvbi1tYW5hZ2VtZW50IgogIGVjaG8gImFuc2libGVfcmVwb19iYXNlZGlyOiBhbnNpYmxlIgogIGVjaG8gImJyYW5jaDogICAgICAgICAgICAgICBtYWluIgogIGVjaG8gImFuc2libGVfYXJnczogICAgICAgICBvcmFjbGVfMTljX2luc3RhbGwiCgogIGlmIFtbIC16IG1vZGVybmlzYXRpb24tcGxhdGZvcm0tY29uZmlndXJhdGlvbi1tYW5hZ2VtZW50IF1dOyB0aGVuCiAgICBlY2hvICJhbnNpYmxlX3JlcG8gbm90IGRlZmluZWQsIG5vdCBpbnN0YWxsaW5nIGFueSBhbnNpYmxlIiA+JjIKICAgIGV4aXQgMAogIGZpCgogIGlmICEgY29tbWFuZCAtdiBhd3MgPiAvZGV2L251bGw7IHRoZW4KICAgIGVjaG8gImF3cyBjbGkgbXVzdCBiZSBpbnN0YWxsZWQsIG5vdCBpbnN0YWxsaW5nIGFueSBhbnNpYmxlIiA+JjIKICAgIGV4aXQgMAogIGZpCgogIGlmICEgY29tbWFuZCAtdiBnaXQgPiAvZGV2L251bGw7IHRoZW4KICAgIGVjaG8gImdpdCBtdXN0IGJlIGluc3RhbGxlZCwgbm90IGluc3RhbGxpbmcgYW55IGFuc2libGUiID4mMgogICAgZXhpdCAwCiAgZmkKCiAgZWNobyAiIyBSZXRyaWV2aW5nIEFQSSBUb2tlbiIKICB0b2tlbj0kKGN1cmwgLXNTIC1YIFBVVCAiaHR0cDovLzE2OS4yNTQuMTY5LjI1NC9sYXRlc3QvYXBpL3Rva2VuIiAtSCAiWC1hd3MtZWMyLW1ldGFkYXRhLXRva2VuLXR0bC1zZWNvbmRzOiAyMTYwMCIpCgogIGVjaG8gIiMgUmV0cmlldmluZyBJbnN0YW5jZSBJRCIKICBpbnN0YW5jZV9pZD0kKGN1cmwgLXNTIC1IICJYLWF3cy1lYzItbWV0YWRhdGEtdG9rZW46ICR0b2tlbiIgLXYgaHR0cDovLzE2OS4yNTQuMTY5LjI1NC9sYXRlc3QvbWV0YS1kYXRhL2luc3RhbmNlLWlkKQoKICBlY2hvICIjIFJldHJpZXZpbmcgdGFncyB1c2luZyBhd3MgY2xpIgogIElGUz0kJ1xuJwogIHRhZ3M9KCQoYXdzIGVjMiBkZXNjcmliZS10YWdzIC0tZmlsdGVycyAiTmFtZT1yZXNvdXJjZS1pZCxWYWx1ZXM9JGluc3RhbmNlX2lkIiAiTmFtZT1rZXksVmFsdWVzPW9zLXR5cGUsYW1pLHNlcnZlci10eXBlLGVudmlyb25tZW50LW5hbWUiIC0tb3V0cHV0PXRleHQpKQogIHVuc2V0IElGUwoKICAjIGNsb25lIGFuc2libGUgcm9sZXMgYW5kIHBsYXlib29rCiAgYW5zaWJsZV9kaXI9JChta3RlbXAgLWQpCiAgZWNobyAiIyBDbG9uaW5nIG1vZGVybmlzYXRpb24tcGxhdGZvcm0tY29uZmlndXJhdGlvbi1tYW5hZ2VtZW50IGludG8gJGFuc2libGVfZGlyIHVzaW5nIGJyYW5jaD1tYWluIgogIGNkICRhbnNpYmxlX2RpcgogIGdpdCBjbG9uZSAiaHR0cHM6Ly9naXRodWIuY29tL21pbmlzdHJ5b2ZqdXN0aWNlL21vZGVybmlzYXRpb24tcGxhdGZvcm0tY29uZmlndXJhdGlvbi1tYW5hZ2VtZW50LmdpdCIKICBjZCAkYW5zaWJsZV9kaXIvbW9kZXJuaXNhdGlvbi1wbGF0Zm9ybS1jb25maWd1cmF0aW9uLW1hbmFnZW1lbnQKICBnaXQgY2hlY2tvdXQgIm1haW4iCiAgY2QgJGFuc2libGVfZGlyCgogICMgZmluZCB0aGUgZ3JvdXBfdmFyIHlhbWwgZmlsZXMKICBhbnNpYmxlX2dyb3VwX3ZhcnM9CiAgZm9yICgoaT0wOyBpPCR7I3RhZ3NbQF19OyBpKyspKTsgZG8KICAgIHRhZz0oJHt0YWdzW2ldfSkKICAgIGdyb3VwPSQoZWNobyAiJHt0YWdbMV19XyR7dGFnWzRdfSIgfCB0ciBbOnVwcGVyOl0gWzpsb3dlcjpdIHwgc2VkICJzLy0vXy9nIikKICAgIGlmIFtbIC1lICRhbnNpYmxlX2Rpci9tb2Rlcm5pc2F0aW9uLXBsYXRmb3JtLWNvbmZpZ3VyYXRpb24tbWFuYWdlbWVudC9hbnNpYmxlL2dyb3VwX3ZhcnMvJGdyb3VwLnltbCBdXTsgdGhlbgogICAgICBhbnNpYmxlX2dyb3VwX3ZhcnM9IiRhbnNpYmxlX2dyb3VwX3ZhcnMgLS1leHRyYS12YXJzIEBncm91cF92YXJzLyRncm91cC55bWwiCiAgICBlbGlmIFtbIC1lICRhbnNpYmxlX2Rpci9tb2Rlcm5pc2F0aW9uLXBsYXRmb3JtLWNvbmZpZ3VyYXRpb24tbWFuYWdlbWVudC9hbnNpYmxlL2dyb3VwX3ZhcnMvJGdyb3VwL2Fuc2libGUueW1sIF1dOyB0aGVuCiAgICAgIGFuc2libGVfZ3JvdXBfdmFycz0iJGFuc2libGVfZ3JvdXBfdmFycyAtLWV4dHJhLXZhcnMgQGdyb3VwX3ZhcnMvJGdyb3VwL2Fuc2libGUueW1sIgogICAgZWxzZQogICAgICBlY2hvICJDb3VsZCBub3QgZmluZCBncm91cF92YXJzICRncm91cCB5bWwiCiAgICAgIGV4aXQgMQogICAgZmkKICBkb25lCgogICMgc2V0IHB5dGhvbiB2ZXJzaW9uCiAgaWYgW1sgJCh3aGljaCBweXRob24zLjkgMj4gL2Rldi9udWxsKSBdXTsgdGhlbgogICAgcHl0aG9uPSQod2hpY2ggcHl0aG9uMy45KQogIGVsaWYgW1sgJCh3aGljaCBweXRob24zLjYgMj4gL2Rldi9udWxsKSBdXTsgdGhlbgogICAgcHl0aG9uPSQod2hpY2ggcHl0aG9uMy42KQogIGVsc2UKICAgIGVjaG8gIlB5dGhvbjMuOS8zLjYgbm90IGZvdW5kIgogICAgZXhpdCAxCiAgZmkKICBlY2hvICIjIFVzaW5nIHB5dGhvbjogJHB5dGhvbiIKCiAgIyBhY3RpdmF0ZSB2aXJ0dWFsIGVudmlyb25tZW50CiAgbWtkaXIgJGFuc2libGVfZGlyL3B5dGhvbi12ZW52ICYmIGNkICIkXyIKICAkcHl0aG9uIC1tIHZlbnYgYW5zaWJsZQogIHNvdXJjZSBhbnNpYmxlL2Jpbi9hY3RpdmF0ZQogICRweXRob24gLW0gcGlwIGluc3RhbGwgLS11cGdyYWRlIHBpcAogIGlmIFtbICIkcHl0aG9uIiA9fiAzLjYgXV07IHRoZW4KICAgICRweXRob24gLW0gcGlwIGluc3RhbGwgd2hlZWwKICAgICRweXRob24gLW0gcGlwIGluc3RhbGwgY3J5cHRvZ3JhcGh5PT0yLjMKICAgIGV4cG9ydCBMQ19BTEw9ZW5fVVMuVVRGLTgKICAgICRweXRob24gLW0gcGlwIGluc3RhbGwgYW5zaWJsZS1jb3JlPT0yLjExLjEyCiAgZWxzZQogICAgJHB5dGhvbiAtbSBwaXAgaW5zdGFsbCBhbnNpYmxlPT02LjAuMAogIGZpCgogICMgaW5zdGFsbCByZXF1aXJlbWVudHMgaW4gdmlydHVhbCBlbnYKICBlY2hvICIjIEluc3RhbGxpbmcgYW5zaWJsZSByZXF1aXJlbWVudHMiCiAgY2QgJGFuc2libGVfZGlyL21vZGVybmlzYXRpb24tcGxhdGZvcm0tY29uZmlndXJhdGlvbi1tYW5hZ2VtZW50L2Fuc2libGUKICAkcHl0aG9uIC1tIHBpcCBpbnN0YWxsIC1yIHJlcXVpcmVtZW50cy50eHQKICBhbnNpYmxlLWdhbGF4eSByb2xlIGluc3RhbGwgLXIgcmVxdWlyZW1lbnRzLnltbAogIGFuc2libGUtZ2FsYXh5IGNvbGxlY3Rpb24gaW5zdGFsbCAtciByZXF1aXJlbWVudHMueW1sCgogICMgcnVuIGFuc2libGUgKGNvbW1hIGFmdGVyIGxvY2FsaG9zdCBkZWxpYmVyYXRlKQogIGVjaG8gIiMgRXhlY3V0ZSBhbnNpYmxlIHNpdGUueW1sICRhbnNpYmxlX2dyb3VwX3ZhcnMgLi4uIgogIGFuc2libGUtcGxheWJvb2sgc2l0ZS55bWwgJGFuc2libGVfZ3JvdXBfdmFycyBcCiAgIC0tY29ubmVjdGlvbj1sb2NhbCBcCiAgIC0taW52ZW50b3J5IGxvY2FsaG9zdCwgXAogICAtLWV4dHJhLXZhcnMgImFuc2libGVfcHl0aG9uX2ludGVycHJldGVyPSRweXRob24iIFwKICAgLS1leHRyYS12YXJzICJ0YXJnZXQ9bG9jYWxob3N0IiBcCiAgIC0tdGFncyAib3JhY2xlXzE5Y19pbnN0YWxsLCBlYzJwcm92aXNpb24iIFwKICAgLS1iZWNvbWUKCiAgZWNobyAiIyBDbGVhbnVwIgogIGRlYWN0aXZhdGUKICBybSAtcmYgJGFuc2libGVfZGlyL3B5dGhvbi12ZW52CiAgcm0gLXJmICRhbnNpYmxlX2Rpci9tb2Rlcm5pc2F0aW9uLXBsYXRmb3JtLWNvbmZpZ3VyYXRpb24tbWFuYWdlbWVudAogIHJtZGlyICRhbnNpYmxlX2Rpcgp9CgplY2hvICJhbnNpYmxlLWVjMnByb3Zpc2lvbi5zaCBzdGFydCIgfCBsb2dnZXIgLXAgbG9jYWwzLmluZm8gLXQgdXNlci1kYXRhCnJ1bl9hbnNpYmxlIDI+JjEgfCBsb2dnZXIgLXAgbG9jYWwzLmluZm8gLXQgdXNlci1kYXRhCmVjaG8gImFuc2libGUtZWMycHJvdmlzaW9uLnNoIGVuZCIgfCBsb2dnZXIgLXAgbG9jYWwzLmluZm8gLXQgdXNlci1kYXRhCgo="
      [32m+[0m[0m user_data_replace_on_change          = false
      [32m+[0m[0m vpc_security_group_ids               = (known after apply)

      [32m+[0m[0m ephemeral_block_device {
          [32m+[0m[0m device_name = "/dev/sdf"
          [32m+[0m[0m no_device   = true
        }
      [32m+[0m[0m ephemeral_block_device {
          [32m+[0m[0m device_name = "/dev/sdg"
          [32m+[0m[0m no_device   = true
        }
      [32m+[0m[0m ephemeral_block_device {
          [32m+[0m[0m device_name = "/dev/sdh"
          [32m+[0m[0m no_device   = true
        }
      [32m+[0m[0m ephemeral_block_device {
          [32m+[0m[0m device_name = "/dev/sdi"
          [32m+[0m[0m no_device   = true
        }
      [32m+[0m[0m ephemeral_block_device {
          [32m+[0m[0m device_name = "/dev/sdk"
          [32m+[0m[0m no_device   = true
        }

      [32m+[0m[0m metadata_options {
          [32m+[0m[0m http_endpoint               = "enabled"
          [32m+[0m[0m http_protocol_ipv6          = "disabled"
          [32m+[0m[0m http_put_response_hop_limit = (known after apply)
          [32m+[0m[0m http_tokens                 = "optional"
          [32m+[0m[0m instance_metadata_tags      = (known after apply)
        }

      [32m+[0m[0m root_block_device {
          [32m+[0m[0m delete_on_termination = true
          [32m+[0m[0m device_name           = (known after apply)
          [32m+[0m[0m encrypted             = true
          [32m+[0m[0m iops                  = 3000
          [32m+[0m[0m kms_key_id            = (known after apply)
          [32m+[0m[0m tags                  = {
              [32m+[0m[0m "application"             = "delius-core"
              [32m+[0m[0m "business-unit"           = "HMPPS"
              [32m+[0m[0m "delius-environment-name" = "test"
              [32m+[0m[0m "environment-name"        = "delius-core-development"
              [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
              [32m+[0m[0m "is-production"           = "false"
              [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
              [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
            }
          [32m+[0m[0m throughput            = 125
          [32m+[0m[0m volume_id             = (known after apply)
          [32m+[0m[0m volume_size           = 30
          [32m+[0m[0m volume_type           = "gp3"
        }
    }

[1m  # module.environment_test[0].aws_key_pair.environment_ec2_user_key_pair[0m will be created
[0m  [32m+[0m[0m resource "aws_key_pair" "environment_ec2_user_key_pair" {
      [32m+[0m[0m arn             = (known after apply)
      [32m+[0m[0m fingerprint     = (known after apply)
      [32m+[0m[0m id              = (known after apply)
      [32m+[0m[0m key_name        = "test-ec2-user-key-pair"
      [32m+[0m[0m key_name_prefix = (known after apply)
      [32m+[0m[0m key_pair_id     = (known after apply)
      [32m+[0m[0m key_type        = (known after apply)
      [32m+[0m[0m public_key      = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDjLFRINkxi9/x1helnGJn/mKqRmeKG5X2yDF0Ja/p8EaEVjmOdxajEFhXWyetDwUOgb8V3k6gOwXLUn9+O++27oAED0PkeSE05DJ2m8E5kcX7ErkUy0HlVrKiJ1mzN8939WDqX3Z8l5GVIg6UqPyUn5I83NK0yYiVjjqB/mbvlWMW0gpZReP8zFZJ9yQ2eJqxilSNVos1aoZd3HopfW3ctCGg4PAVabENprX+pJ0qQyQ03M4BhnCS+BoNmEmn9U8Dh+3+7FFVdOIsWaGCY3nr+QQ2hpPXPzVk+wn5075lhoo4ohMn+av+mG4Ya0Q26ETniW/gGp9kmtOTU9GUu/8zGUnUhkmOBkR/z07JUzmEO2hxHldTpLyHp7ZmZsDzFrwPzC9tlTyoRRxikKmz4BpuZvQXJvK7wHkMW/qqza8paIB59L8Mv9CebJUCd8TGvl3NZgjFENemdiRIJuW+u96UgcfHd0ysu1gbeDqsarmvyFVNRPJ+ueFra8sWGO+M7O9z4XcNCeuilLem9Rsrcw5rB2HDZJHIeoz1UILOl0CQZRWYC4TaKISMZQ8fmlFA0zQ9dSJanSjczAWd7BZEMGwd3FJMqK16/ssl+zW5ngQacD5YxxUq1N6Jhsv0bkPG9xd1UDL44445xbT2/pNmtP70/d+1i+au7EMfqQXutae/ZVw=="
      [32m+[0m[0m tags            = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all        = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
    }

[1m  # module.environment_test[0].aws_lb.delius_core_frontend[0m will be created
[0m  [32m+[0m[0m resource "aws_lb" "delius_core_frontend" {
      [32m+[0m[0m arn                                         = (known after apply)
      [32m+[0m[0m arn_suffix                                  = (known after apply)
      [32m+[0m[0m desync_mitigation_mode                      = "defensive"
      [32m+[0m[0m dns_name                                    = (known after apply)
      [32m+[0m[0m drop_invalid_header_fields                  = true
      [32m+[0m[0m enable_deletion_protection                  = false
      [32m+[0m[0m enable_http2                                = true
      [32m+[0m[0m enable_tls_version_and_cipher_suite_headers = false
      [32m+[0m[0m enable_waf_fail_open                        = false
      [32m+[0m[0m enable_xff_client_port                      = false
      [32m+[0m[0m id                                          = (known after apply)
      [32m+[0m[0m idle_timeout                                = 60
      [32m+[0m[0m internal                                    = false
      [32m+[0m[0m ip_address_type                             = (known after apply)
      [32m+[0m[0m load_balancer_type                          = "application"
      [32m+[0m[0m name                                        = "delius-core-test-weblogic-alb"
      [32m+[0m[0m preserve_host_header                        = false
      [32m+[0m[0m security_groups                             = (known after apply)
      [32m+[0m[0m subnets                                     = [
          [32m+[0m[0m "subnet-0131824ef5a4ece01",
          [32m+[0m[0m "subnet-01815760b71d6a619",
          [32m+[0m[0m "subnet-04af8bd9dbbce3310",
        ]
      [32m+[0m[0m tags_all                                    = (known after apply)
      [32m+[0m[0m vpc_id                                      = (known after apply)
      [32m+[0m[0m xff_header_processing_mode                  = "append"
      [32m+[0m[0m zone_id                                     = (known after apply)
    }

[1m  # module.environment_test[0].aws_lb.ldap[0m will be created
[0m  [32m+[0m[0m resource "aws_lb" "ldap" {
      [32m+[0m[0m arn                              = (known after apply)
      [32m+[0m[0m arn_suffix                       = (known after apply)
      [32m+[0m[0m dns_name                         = (known after apply)
      [32m+[0m[0m enable_cross_zone_load_balancing = false
      [32m+[0m[0m enable_deletion_protection       = false
      [32m+[0m[0m id                               = (known after apply)
      [32m+[0m[0m internal                         = true
      [32m+[0m[0m ip_address_type                  = (known after apply)
      [32m+[0m[0m load_balancer_type               = "network"
      [32m+[0m[0m name                             = "test-ldap-nlb"
      [32m+[0m[0m security_groups                  = (known after apply)
      [32m+[0m[0m subnets                          = [
          [32m+[0m[0m "subnet-0131824ef5a4ece01",
          [32m+[0m[0m "subnet-01815760b71d6a619",
          [32m+[0m[0m "subnet-04af8bd9dbbce3310",
        ]
      [32m+[0m[0m tags                             = {
          [32m+[0m[0m "Name"                    = "test-ldap-nlb"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all                         = {
          [32m+[0m[0m "Name"                    = "test-ldap-nlb"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m vpc_id                           = (known after apply)
      [32m+[0m[0m zone_id                          = (known after apply)
    }

[1m  # module.environment_test[0].aws_lb_listener.ldap[0m will be created
[0m  [32m+[0m[0m resource "aws_lb_listener" "ldap" {
      [32m+[0m[0m arn               = (known after apply)
      [32m+[0m[0m id                = (known after apply)
      [32m+[0m[0m load_balancer_arn = (known after apply)
      [32m+[0m[0m port              = 389
      [32m+[0m[0m protocol          = "TCP"
      [32m+[0m[0m ssl_policy        = (known after apply)
      [32m+[0m[0m tags              = {
          [32m+[0m[0m "Name"                    = "test-ldap-nlb"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all          = {
          [32m+[0m[0m "Name"                    = "test-ldap-nlb"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }

      [32m+[0m[0m default_action {
          [32m+[0m[0m order            = (known after apply)
          [32m+[0m[0m target_group_arn = (known after apply)
          [32m+[0m[0m type             = "forward"
        }
    }

[1m  # module.environment_test[0].aws_lb_listener.listener[0m will be created
[0m  [32m+[0m[0m resource "aws_lb_listener" "listener" {
      [32m+[0m[0m arn               = (known after apply)
      [32m+[0m[0m certificate_arn   = (known after apply)
      [32m+[0m[0m id                = (known after apply)
      [32m+[0m[0m load_balancer_arn = (known after apply)
      [32m+[0m[0m port              = 443
      [32m+[0m[0m protocol          = "HTTPS"
      [32m+[0m[0m ssl_policy        = "ELBSecurityPolicy-TLS-1-2-2017-01"
      [32m+[0m[0m tags_all          = (known after apply)

      [32m+[0m[0m default_action {
          [32m+[0m[0m order            = (known after apply)
          [32m+[0m[0m target_group_arn = (known after apply)
          [32m+[0m[0m type             = "forward"
        }
    }

[1m  # module.environment_test[0].aws_lb_listener.listener_http[0m will be created
[0m  [32m+[0m[0m resource "aws_lb_listener" "listener_http" {
      [32m+[0m[0m arn               = (known after apply)
      [32m+[0m[0m id                = (known after apply)
      [32m+[0m[0m load_balancer_arn = (known after apply)
      [32m+[0m[0m port              = 80
      [32m+[0m[0m protocol          = "HTTP"
      [32m+[0m[0m ssl_policy        = (known after apply)
      [32m+[0m[0m tags_all          = (known after apply)

      [32m+[0m[0m default_action {
          [32m+[0m[0m order = (known after apply)
          [32m+[0m[0m type  = "redirect"

          [32m+[0m[0m redirect {
              [32m+[0m[0m host        = "#{host}"
              [32m+[0m[0m path        = "/#{path}"
              [32m+[0m[0m port        = "443"
              [32m+[0m[0m protocol    = "HTTPS"
              [32m+[0m[0m query       = "#{query}"
              [32m+[0m[0m status_code = "HTTP_301"
            }
        }
    }

[1m  # module.environment_test[0].aws_lb_target_group.delius_core_frontend_target_group[0m will be created
[0m  [32m+[0m[0m resource "aws_lb_target_group" "delius_core_frontend_target_group" {
      [32m+[0m[0m arn                                = (known after apply)
      [32m+[0m[0m arn_suffix                         = (known after apply)
      [32m+[0m[0m connection_termination             = false
      [32m+[0m[0m deregistration_delay               = "30"
      [32m+[0m[0m id                                 = (known after apply)
      [32m+[0m[0m ip_address_type                    = (known after apply)
      [32m+[0m[0m lambda_multi_value_headers_enabled = false
      [32m+[0m[0m load_balancing_algorithm_type      = (known after apply)
      [32m+[0m[0m load_balancing_cross_zone_enabled  = (known after apply)
      [32m+[0m[0m name                               = "delius-core-testing-frontend"
      [32m+[0m[0m port                               = 8080
      [32m+[0m[0m preserve_client_ip                 = (known after apply)
      [32m+[0m[0m protocol                           = "HTTP"
      [32m+[0m[0m protocol_version                   = (known after apply)
      [32m+[0m[0m proxy_protocol_v2                  = false
      [32m+[0m[0m slow_start                         = 0
      [32m+[0m[0m tags                               = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all                           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m target_type                        = "ip"
      [32m+[0m[0m vpc_id                             = "vpc-01d7a2da8f9f1dfec"

      [32m+[0m[0m health_check {
          [32m+[0m[0m enabled             = true
          [32m+[0m[0m healthy_threshold   = 5
          [32m+[0m[0m interval            = 300
          [32m+[0m[0m matcher             = "200-499"
          [32m+[0m[0m path                = "/NDelius-war/delius/JSP/healthcheck.jsp?ping"
          [32m+[0m[0m port                = "traffic-port"
          [32m+[0m[0m protocol            = "HTTP"
          [32m+[0m[0m timeout             = 5
          [32m+[0m[0m unhealthy_threshold = 2
        }

      [32m+[0m[0m stickiness {
          [32m+[0m[0m cookie_duration = 86400
          [32m+[0m[0m enabled         = true
          [32m+[0m[0m type            = "lb_cookie"
        }
    }

[1m  # module.environment_test[0].aws_lb_target_group.ldap[0m will be created
[0m  [32m+[0m[0m resource "aws_lb_target_group" "ldap" {
      [32m+[0m[0m arn                                = (known after apply)
      [32m+[0m[0m arn_suffix                         = (known after apply)
      [32m+[0m[0m connection_termination             = false
      [32m+[0m[0m deregistration_delay               = "30"
      [32m+[0m[0m id                                 = (known after apply)
      [32m+[0m[0m ip_address_type                    = (known after apply)
      [32m+[0m[0m lambda_multi_value_headers_enabled = false
      [32m+[0m[0m load_balancing_algorithm_type      = (known after apply)
      [32m+[0m[0m load_balancing_cross_zone_enabled  = (known after apply)
      [32m+[0m[0m name                               = "test-ldap"
      [32m+[0m[0m port                               = 389
      [32m+[0m[0m preserve_client_ip                 = (known after apply)
      [32m+[0m[0m protocol                           = "TCP"
      [32m+[0m[0m protocol_version                   = (known after apply)
      [32m+[0m[0m proxy_protocol_v2                  = false
      [32m+[0m[0m slow_start                         = 0
      [32m+[0m[0m tags                               = {
          [32m+[0m[0m "Name"                    = "test-ldap"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all                           = {
          [32m+[0m[0m "Name"                    = "test-ldap"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m target_type                        = "ip"
      [32m+[0m[0m vpc_id                             = "vpc-01d7a2da8f9f1dfec"
    }

[1m  # module.environment_test[0].aws_route53_record.external[0m will be created
[0m  [32m+[0m[0m resource "aws_route53_record" "external" {
      [32m+[0m[0m allow_overwrite = (known after apply)
      [32m+[0m[0m fqdn            = (known after apply)
      [32m+[0m[0m id              = (known after apply)
      [32m+[0m[0m name            = "delius-core.test.hmpps-development.modernisation-platform.service.justice.gov.uk"
      [32m+[0m[0m type            = "A"
      [32m+[0m[0m zone_id         = "Z06150783ELOEMNIC36YS"

      [32m+[0m[0m alias {
          [32m+[0m[0m evaluate_target_health = true
          [32m+[0m[0m name                   = (known after apply)
          [32m+[0m[0m zone_id                = (known after apply)
        }
    }

[1m  # module.environment_test[0].aws_route53_record.external_validation[0m will be created
[0m  [32m+[0m[0m resource "aws_route53_record" "external_validation" {
      [32m+[0m[0m allow_overwrite = true
      [32m+[0m[0m fqdn            = (known after apply)
      [32m+[0m[0m id              = (known after apply)
      [32m+[0m[0m name            = (known after apply)
      [32m+[0m[0m records         = (known after apply)
      [32m+[0m[0m ttl             = 60
      [32m+[0m[0m type            = (known after apply)
      [32m+[0m[0m zone_id         = "Z00379322STHYMCQ5Z45Y"
    }

[1m  # module.environment_test[0].aws_route53_record.external_validation_subdomain[0m will be created
[0m  [32m+[0m[0m resource "aws_route53_record" "external_validation_subdomain" {
      [32m+[0m[0m allow_overwrite = true
      [32m+[0m[0m fqdn            = (known after apply)
      [32m+[0m[0m id              = (known after apply)
      [32m+[0m[0m name            = (known after apply)
      [32m+[0m[0m records         = (known after apply)
      [32m+[0m[0m ttl             = 60
      [32m+[0m[0m type            = (known after apply)
      [32m+[0m[0m zone_id         = "Z06150783ELOEMNIC36YS"
    }

[1m  # module.environment_test[0].aws_route53_record.ldap_dns_internal[0m will be created
[0m  [32m+[0m[0m resource "aws_route53_record" "ldap_dns_internal" {
      [32m+[0m[0m allow_overwrite = (known after apply)
      [32m+[0m[0m fqdn            = (known after apply)
      [32m+[0m[0m id              = (known after apply)
      [32m+[0m[0m name            = "test.ldap.delius-core"
      [32m+[0m[0m type            = "A"
      [32m+[0m[0m zone_id         = "Z00199953OWKAOWK2VKS8"

      [32m+[0m[0m alias {
          [32m+[0m[0m evaluate_target_health = true
          [32m+[0m[0m name                   = (known after apply)
          [32m+[0m[0m zone_id                = (known after apply)
        }
    }

[1m  # module.environment_test[0].aws_secretsmanager_secret.delius_core_ldap_credential[0m will be created
[0m  [32m+[0m[0m resource "aws_secretsmanager_secret" "delius_core_ldap_credential" {
      [32m+[0m[0m arn                            = (known after apply)
      [32m+[0m[0m force_overwrite_replica_secret = false
      [32m+[0m[0m id                             = (known after apply)
      [32m+[0m[0m name                           = "delius-core-test-openldap-bind-password"
      [32m+[0m[0m name_prefix                    = (known after apply)
      [32m+[0m[0m policy                         = (known after apply)
      [32m+[0m[0m recovery_window_in_days        = 30
      [32m+[0m[0m tags_all                       = (known after apply)
    }

[1m  # module.environment_test[0].aws_secretsmanager_secret_version.delius_core_ldap_credential[0m will be created
[0m  [32m+[0m[0m resource "aws_secretsmanager_secret_version" "delius_core_ldap_credential" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m secret_id      = (known after apply)
      [32m+[0m[0m secret_string  = (sensitive value)
      [32m+[0m[0m version_id     = (known after apply)
      [32m+[0m[0m version_stages = (known after apply)
    }

[1m  # module.environment_test[0].aws_security_group.db_ec2_instance_sg[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group" "db_ec2_instance_sg" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m description            = "Controls access to db ec2 instance"
      [32m+[0m[0m egress                 = (known after apply)
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ingress                = (known after apply)
      [32m+[0m[0m name                   = "test-sg-delius-db-ec2-instance"
      [32m+[0m[0m name_prefix            = (known after apply)
      [32m+[0m[0m owner_id               = (known after apply)
      [32m+[0m[0m revoke_rules_on_delete = false
      [32m+[0m[0m tags                   = {
          [32m+[0m[0m "Name"                    = "test-sg-delius-db-ec2-instance"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all               = {
          [32m+[0m[0m "Name"                    = "test-sg-delius-db-ec2-instance"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m vpc_id                 = "vpc-01d7a2da8f9f1dfec"
    }

[1m  # module.environment_test[0].aws_security_group.delius_core_frontend_security_group[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group" "delius_core_frontend_security_group" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m description            = "Rules for the delius testing frontend ecs service"
      [32m+[0m[0m egress                 = (known after apply)
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ingress                = (known after apply)
      [32m+[0m[0m name                   = "Delius Core Frontend Weblogic"
      [32m+[0m[0m name_prefix            = (known after apply)
      [32m+[0m[0m owner_id               = (known after apply)
      [32m+[0m[0m revoke_rules_on_delete = false
      [32m+[0m[0m tags                   = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all               = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m vpc_id                 = "vpc-01d7a2da8f9f1dfec"
    }

[1m  # module.environment_test[0].aws_security_group.delius_db_security_group[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group" "delius_db_security_group" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m description            = "Rules for the delius testing db ecs service"
      [32m+[0m[0m egress                 = (known after apply)
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ingress                = (known after apply)
      [32m+[0m[0m name                   = "Delius Core DB"
      [32m+[0m[0m name_prefix            = (known after apply)
      [32m+[0m[0m owner_id               = (known after apply)
      [32m+[0m[0m revoke_rules_on_delete = false
      [32m+[0m[0m tags                   = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all               = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m vpc_id                 = "vpc-01d7a2da8f9f1dfec"
    }

[1m  # module.environment_test[0].aws_security_group.delius_frontend_alb_security_group[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group" "delius_frontend_alb_security_group" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m description            = "controls access to and from delius front-end load balancer"
      [32m+[0m[0m egress                 = (known after apply)
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ingress                = (known after apply)
      [32m+[0m[0m name                   = "Delius Core Frontend Load Balancer"
      [32m+[0m[0m name_prefix            = (known after apply)
      [32m+[0m[0m owner_id               = (known after apply)
      [32m+[0m[0m revoke_rules_on_delete = false
      [32m+[0m[0m tags                   = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all               = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m vpc_id                 = "vpc-01d7a2da8f9f1dfec"
    }

[1m  # module.environment_test[0].aws_security_group.ldap[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group" "ldap" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m description            = "Security group for the test ldap service"
      [32m+[0m[0m egress                 = (known after apply)
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ingress                = (known after apply)
      [32m+[0m[0m name                   = "test-ldap-sg"
      [32m+[0m[0m name_prefix            = (known after apply)
      [32m+[0m[0m owner_id               = (known after apply)
      [32m+[0m[0m revoke_rules_on_delete = false
      [32m+[0m[0m tags                   = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all               = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m vpc_id                 = "vpc-01d7a2da8f9f1dfec"
    }

[1m  # module.environment_test[0].aws_security_group.ldap_efs[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group" "ldap_efs" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m description            = "Allow traffic between ldap service and efs in test"
      [32m+[0m[0m egress                 = (known after apply)
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ingress                = (known after apply)
      [32m+[0m[0m name                   = "test-ldap-efs"
      [32m+[0m[0m name_prefix            = (known after apply)
      [32m+[0m[0m owner_id               = (known after apply)
      [32m+[0m[0m revoke_rules_on_delete = false
      [32m+[0m[0m tags                   = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all               = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m vpc_id                 = "vpc-01d7a2da8f9f1dfec"
    }

[1m  # module.environment_test[0].aws_security_group.weblogic[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group" "weblogic" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m description            = "Security group for the test weblogic service"
      [32m+[0m[0m egress                 = (known after apply)
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ingress                = (known after apply)
      [32m+[0m[0m name                   = "test-weblogic-sg"
      [32m+[0m[0m name_prefix            = (known after apply)
      [32m+[0m[0m owner_id               = (known after apply)
      [32m+[0m[0m revoke_rules_on_delete = false
      [32m+[0m[0m tags                   = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all               = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m vpc_id                 = "vpc-01d7a2da8f9f1dfec"
    }

[1m  # module.environment_test[0].aws_security_group_rule.allow_all_egress[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group_rule" "allow_all_egress" {
      [32m+[0m[0m cidr_blocks              = [
          [32m+[0m[0m "0.0.0.0/0",
        ]
      [32m+[0m[0m description              = "Allow all outbound traffic to any IPv4 address"
      [32m+[0m[0m from_port                = 0
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m protocol                 = "-1"
      [32m+[0m[0m security_group_id        = (known after apply)
      [32m+[0m[0m security_group_rule_id   = (known after apply)
      [32m+[0m[0m self                     = false
      [32m+[0m[0m source_security_group_id = (known after apply)
      [32m+[0m[0m to_port                  = 0
      [32m+[0m[0m type                     = "egress"
    }

[1m  # module.environment_test[0].aws_security_group_rule.allow_ldap_from_legacy_env[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group_rule" "allow_ldap_from_legacy_env" {
      [32m+[0m[0m cidr_blocks              = [
          [32m+[0m[0m "10.161.20.0/22",
        ]
      [32m+[0m[0m description              = "Allow inbound LDAP traffic from corresponding legacy VPC"
      [32m+[0m[0m from_port                = 389
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m protocol                 = "tcp"
      [32m+[0m[0m security_group_id        = (known after apply)
      [32m+[0m[0m security_group_rule_id   = (known after apply)
      [32m+[0m[0m self                     = false
      [32m+[0m[0m source_security_group_id = (known after apply)
      [32m+[0m[0m to_port                  = 389
      [32m+[0m[0m type                     = "ingress"
    }

[1m  # module.environment_test[0].aws_security_group_rule.efs_egress[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group_rule" "efs_egress" {
      [32m+[0m[0m cidr_blocks              = [
          [32m+[0m[0m "10.26.24.0/21",
        ]
      [32m+[0m[0m from_port                = 0
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m protocol                 = "-1"
      [32m+[0m[0m security_group_id        = (known after apply)
      [32m+[0m[0m security_group_rule_id   = (known after apply)
      [32m+[0m[0m self                     = false
      [32m+[0m[0m source_security_group_id = (known after apply)
      [32m+[0m[0m to_port                  = 0
      [32m+[0m[0m type                     = "egress"
    }

[1m  # module.environment_test[0].aws_security_group_rule.efs_ingress[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group_rule" "efs_ingress" {
      [32m+[0m[0m from_port                = 2049
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m protocol                 = "tcp"
      [32m+[0m[0m security_group_id        = (known after apply)
      [32m+[0m[0m security_group_rule_id   = (known after apply)
      [32m+[0m[0m self                     = false
      [32m+[0m[0m source_security_group_id = (known after apply)
      [32m+[0m[0m to_port                  = 2049
      [32m+[0m[0m type                     = "ingress"
    }

[1m  # module.environment_test[0].aws_security_group_rule.efs_ingress_ldap[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group_rule" "efs_ingress_ldap" {
      [32m+[0m[0m from_port                = 2049
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m protocol                 = "tcp"
      [32m+[0m[0m security_group_id        = (known after apply)
      [32m+[0m[0m security_group_rule_id   = (known after apply)
      [32m+[0m[0m self                     = false
      [32m+[0m[0m source_security_group_id = (known after apply)
      [32m+[0m[0m to_port                  = 2049
      [32m+[0m[0m type                     = "ingress"
    }

[1m  # module.environment_test[0].aws_security_group_rule.ldap_nlb[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group_rule" "ldap_nlb" {
      [32m+[0m[0m cidr_blocks              = [
          [32m+[0m[0m "10.26.24.0/21",
        ]
      [32m+[0m[0m description              = "Allow inbound traffic from VPC"
      [32m+[0m[0m from_port                = 389
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m protocol                 = "tcp"
      [32m+[0m[0m security_group_id        = (known after apply)
      [32m+[0m[0m security_group_rule_id   = (known after apply)
      [32m+[0m[0m self                     = false
      [32m+[0m[0m source_security_group_id = (known after apply)
      [32m+[0m[0m to_port                  = 389
      [32m+[0m[0m type                     = "ingress"
    }

[1m  # module.environment_test[0].aws_security_group_rule.weblogic_alb[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group_rule" "weblogic_alb" {
      [32m+[0m[0m cidr_blocks              = [
          [32m+[0m[0m "10.26.24.0/21",
        ]
      [32m+[0m[0m description              = "Allow inbound traffic from VPC"
      [32m+[0m[0m from_port                = 8080
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m protocol                 = "tcp"
      [32m+[0m[0m security_group_id        = (known after apply)
      [32m+[0m[0m security_group_rule_id   = (known after apply)
      [32m+[0m[0m self                     = false
      [32m+[0m[0m source_security_group_id = (known after apply)
      [32m+[0m[0m to_port                  = 8080
      [32m+[0m[0m type                     = "ingress"
    }

[1m  # module.environment_test[0].aws_security_group_rule.weblogic_allow_all_egress[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group_rule" "weblogic_allow_all_egress" {
      [32m+[0m[0m cidr_blocks              = [
          [32m+[0m[0m "0.0.0.0/0",
        ]
      [32m+[0m[0m description              = "Allow all outbound traffic to any IPv4 address"
      [32m+[0m[0m from_port                = 0
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m protocol                 = "-1"
      [32m+[0m[0m security_group_id        = (known after apply)
      [32m+[0m[0m security_group_rule_id   = (known after apply)
      [32m+[0m[0m self                     = false
      [32m+[0m[0m source_security_group_id = (known after apply)
      [32m+[0m[0m to_port                  = 0
      [32m+[0m[0m type                     = "egress"
    }

[1m  # module.environment_test[0].aws_ssm_parameter.casenotes_user[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "casenotes_user" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/casenotes_user"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.casenotes_user_password[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "casenotes_user_password" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/casenotes_user_password"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.delius_core_frontend_env_var_dev_password[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "delius_core_frontend_env_var_dev_password" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core/test/DEV_PASSWORD"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.delius_core_frontend_env_var_dev_username[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "delius_core_frontend_env_var_dev_username" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core/test/DEV_USERNAME"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.delius_core_frontend_env_var_eis_user_context[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "delius_core_frontend_env_var_eis_user_context" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core/test/EIS_USER_CONTEXT"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.delius_core_frontend_env_var_jdbc_password[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "delius_core_frontend_env_var_jdbc_password" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core/test/JCBC_PASSWORD"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.delius_core_frontend_env_var_jdbc_url[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "delius_core_frontend_env_var_jdbc_url" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core/test/JCBC_URL"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.delius_core_frontend_env_var_test_mode[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "delius_core_frontend_env_var_test_mode" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core/test/TEST_MODE"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "String"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.delius_core_frontend_env_var_user_context[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "delius_core_frontend_env_var_user_context" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core/test/USER_CONTEXT"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.delius_core_gdpr_api_client_secret[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "delius_core_gdpr_api_client_secret" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/gdpr/api/client_secret"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.delius_core_ldap_host[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "delius_core_ldap_host" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/LDAP_HOST"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.delius_core_ldap_principal[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "delius_core_ldap_principal" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/LDAP_PRINCIPAL"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.delius_core_merge_api_client_secret[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "delius_core_merge_api_client_secret" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/merge/api/client_secret"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.delius_core_pwm_config_password[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "delius_core_pwm_config_password" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/pwm/pwm/config_password"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.delius_core_weblogic_ndelius_domain_umt_client_secret[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "delius_core_weblogic_ndelius_domain_umt_client_secret" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/weblogic/ndelius-domain/umt_client_secret"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.dss_user[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "dss_user" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/dss_user"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.dss_user_password[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "dss_user_password" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/dss_user_password"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.ec2-user-ssh-key[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "ec2-user-ssh-key" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m description    = "ssh private key for ec2-user used for the test environment"
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = "arn:aws:kms:eu-west-2:374269020027:key/90121e65-c5fa-43a9-8075-6f3410d2a025"
      [32m+[0m[0m name           = "/test/ec2-user-ssh-key"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.iaps_user[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "iaps_user" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/iaps_user"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.iaps_user_password[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "iaps_user_password" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/iaps_user_password"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.ldap_admin_password[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "ldap_admin_password" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/LDAP_ADMIN_PASSWORD"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.ldap_bind_password[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "ldap_bind_password" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/LDAP_BIND_PASSWORD"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.oasys_password[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "oasys_password" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/oasys_password"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.oasys_user[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "oasys_user" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/oasys_user"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_ssm_parameter.test_user_password[0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "test_user_password" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = "/delius-core-test/test_user_password"
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.environment_test[0].aws_vpc_security_group_egress_rule.db_ec2_instance_https_out[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_egress_rule" "db_ec2_instance_https_out" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m cidr_ipv4              = "0.0.0.0/0"
      [32m+[0m[0m description            = "Allow communication out on port 443, e.g. for SSM"
      [32m+[0m[0m from_port              = 443
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_protocol            = "tcp"
      [32m+[0m[0m security_group_id      = (known after apply)
      [32m+[0m[0m security_group_rule_id = (known after apply)
      [32m+[0m[0m tags                   = {
          [32m+[0m[0m "Name"                    = "https-out"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all               = {
          [32m+[0m[0m "Name"                    = "https-out"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m to_port                = 443
    }

[1m  # module.environment_test[0].aws_vpc_security_group_egress_rule.db_ec2_instance_rman[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_egress_rule" "db_ec2_instance_rman" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m cidr_ipv4              = "10.161.98.0/25"
      [32m+[0m[0m description            = "Allow communication out on port 1521 to legacy rman"
      [32m+[0m[0m from_port              = 1521
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_protocol            = "tcp"
      [32m+[0m[0m security_group_id      = (known after apply)
      [32m+[0m[0m security_group_rule_id = (known after apply)
      [32m+[0m[0m tags                   = {
          [32m+[0m[0m "Name"                    = "legacy-rman-out"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all               = {
          [32m+[0m[0m "Name"                    = "legacy-rman-out"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m to_port                = 1521
    }

[1m  # module.environment_test[0].aws_vpc_security_group_egress_rule.delius_core_frontend_alb_egress_frontend_service[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_egress_rule" "delius_core_frontend_alb_egress_frontend_service" {
      [32m+[0m[0m arn                          = (known after apply)
      [32m+[0m[0m description                  = "access from delius core frontend alb to ecs"
      [32m+[0m[0m from_port                    = 8080
      [32m+[0m[0m id                           = (known after apply)
      [32m+[0m[0m ip_protocol                  = "tcp"
      [32m+[0m[0m referenced_security_group_id = (known after apply)
      [32m+[0m[0m security_group_id            = (known after apply)
      [32m+[0m[0m security_group_rule_id       = (known after apply)
      [32m+[0m[0m tags                         = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all                     = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m to_port                      = 8080
    }

[1m  # module.environment_test[0].aws_vpc_security_group_egress_rule.delius_core_frontend_security_group_egress_db[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_egress_rule" "delius_core_frontend_security_group_egress_db" {
      [32m+[0m[0m arn                          = (known after apply)
      [32m+[0m[0m description                  = "outbound from the testing frontend ecs service"
      [32m+[0m[0m from_port                    = 1521
      [32m+[0m[0m id                           = (known after apply)
      [32m+[0m[0m ip_protocol                  = "tcp"
      [32m+[0m[0m referenced_security_group_id = (known after apply)
      [32m+[0m[0m security_group_id            = (known after apply)
      [32m+[0m[0m security_group_rule_id       = (known after apply)
      [32m+[0m[0m tags_all                     = {}
      [32m+[0m[0m to_port                      = 1521
    }

[1m  # module.environment_test[0].aws_vpc_security_group_egress_rule.delius_core_frontend_security_group_egress_internet[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_egress_rule" "delius_core_frontend_security_group_egress_internet" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m cidr_ipv4              = "0.0.0.0/0"
      [32m+[0m[0m description            = "outbound from weblogic to any secure endpoint"
      [32m+[0m[0m from_port              = 443
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_protocol            = "tcp"
      [32m+[0m[0m security_group_id      = (known after apply)
      [32m+[0m[0m security_group_rule_id = (known after apply)
      [32m+[0m[0m tags_all               = {}
      [32m+[0m[0m to_port                = 443
    }

[1m  # module.environment_test[0].aws_vpc_security_group_egress_rule.delius_core_frontend_security_group_ldap_tcp[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_egress_rule" "delius_core_frontend_security_group_ldap_tcp" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m cidr_ipv4              = "10.26.24.0/21"
      [32m+[0m[0m description            = "outbound from weblogic to any secure endpoint"
      [32m+[0m[0m from_port              = 389
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_protocol            = "tcp"
      [32m+[0m[0m security_group_id      = (known after apply)
      [32m+[0m[0m security_group_rule_id = (known after apply)
      [32m+[0m[0m tags_all               = {}
      [32m+[0m[0m to_port                = 389
    }

[1m  # module.environment_test[0].aws_vpc_security_group_egress_rule.delius_core_frontend_security_group_ldap_udp[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_egress_rule" "delius_core_frontend_security_group_ldap_udp" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m cidr_ipv4              = "10.26.24.0/21"
      [32m+[0m[0m description            = "outbound from weblogic to any secure endpoint"
      [32m+[0m[0m from_port              = 389
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_protocol            = "udp"
      [32m+[0m[0m security_group_id      = (known after apply)
      [32m+[0m[0m security_group_rule_id = (known after apply)
      [32m+[0m[0m tags_all               = {}
      [32m+[0m[0m to_port                = 389
    }

[1m  # module.environment_test[0].aws_vpc_security_group_egress_rule.delius_db_security_group_egress_internet[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_egress_rule" "delius_db_security_group_egress_internet" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m cidr_ipv4              = "0.0.0.0/0"
      [32m+[0m[0m description            = "outbound from the testing db ecs service"
      [32m+[0m[0m from_port              = 443
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_protocol            = "tcp"
      [32m+[0m[0m security_group_id      = (known after apply)
      [32m+[0m[0m security_group_rule_id = (known after apply)
      [32m+[0m[0m tags_all               = {}
      [32m+[0m[0m to_port                = 443
    }

[1m  # module.environment_test[0].aws_vpc_security_group_ingress_rule.db_ec2_instance_rman[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_ingress_rule" "db_ec2_instance_rman" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m cidr_ipv4              = "10.161.98.0/25"
      [32m+[0m[0m description            = "Allow communication in on port 1521 from legacy rman"
      [32m+[0m[0m from_port              = 1521
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_protocol            = "tcp"
      [32m+[0m[0m security_group_id      = (known after apply)
      [32m+[0m[0m security_group_rule_id = (known after apply)
      [32m+[0m[0m tags                   = {
          [32m+[0m[0m "Name"                    = "legacy-rman-in"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all               = {
          [32m+[0m[0m "Name"                    = "legacy-rman-in"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m to_port                = 1521
    }

[1m  # module.environment_test[0].aws_vpc_security_group_ingress_rule.delius_core_frontend_alb_ingress_http_allowlist[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_ingress_rule" "delius_core_frontend_alb_ingress_http_allowlist" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m cidr_ipv4              = "81.134.202.29/32"
      [32m+[0m[0m description            = "access into delius core frontend alb over http (will redirect)"
      [32m+[0m[0m from_port              = 80
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_protocol            = "tcp"
      [32m+[0m[0m security_group_id      = (known after apply)
      [32m+[0m[0m security_group_rule_id = (known after apply)
      [32m+[0m[0m tags_all               = {}
      [32m+[0m[0m to_port                = 80
    }

[1m  # module.environment_test[0].aws_vpc_security_group_ingress_rule.delius_core_frontend_alb_ingress_https_allowlist[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_ingress_rule" "delius_core_frontend_alb_ingress_https_allowlist" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m cidr_ipv4              = "81.134.202.29/32"
      [32m+[0m[0m description            = "access into delius core frontend alb over https"
      [32m+[0m[0m from_port              = 443
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_protocol            = "tcp"
      [32m+[0m[0m security_group_id      = (known after apply)
      [32m+[0m[0m security_group_rule_id = (known after apply)
      [32m+[0m[0m tags_all               = {}
      [32m+[0m[0m to_port                = 443
    }

[1m  # module.environment_test[0].aws_vpc_security_group_ingress_rule.delius_core_frontend_ldap_tcp[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_ingress_rule" "delius_core_frontend_ldap_tcp" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m cidr_ipv4              = "10.26.24.0/21"
      [32m+[0m[0m description            = "ingress from ldap server tcp"
      [32m+[0m[0m from_port              = 389
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_protocol            = "tcp"
      [32m+[0m[0m security_group_id      = (known after apply)
      [32m+[0m[0m security_group_rule_id = (known after apply)
      [32m+[0m[0m tags_all               = {}
      [32m+[0m[0m to_port                = 389
    }

[1m  # module.environment_test[0].aws_vpc_security_group_ingress_rule.delius_core_frontend_ldap_udp[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_ingress_rule" "delius_core_frontend_ldap_udp" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m cidr_ipv4              = "10.26.24.0/21"
      [32m+[0m[0m description            = "ingress from ldap server"
      [32m+[0m[0m from_port              = 389
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_protocol            = "udp"
      [32m+[0m[0m security_group_id      = (known after apply)
      [32m+[0m[0m security_group_rule_id = (known after apply)
      [32m+[0m[0m tags_all               = {}
      [32m+[0m[0m to_port                = 389
    }

[1m  # module.environment_test[0].aws_vpc_security_group_ingress_rule.delius_core_frontend_security_group_ingress_private_subnets[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_ingress_rule" "delius_core_frontend_security_group_ingress_private_subnets" {
      [32m+[0m[0m arn                          = (known after apply)
      [32m+[0m[0m description                  = "load balancer to weblogic frontend"
      [32m+[0m[0m from_port                    = 8080
      [32m+[0m[0m id                           = (known after apply)
      [32m+[0m[0m ip_protocol                  = "tcp"
      [32m+[0m[0m referenced_security_group_id = (known after apply)
      [32m+[0m[0m security_group_id            = (known after apply)
      [32m+[0m[0m security_group_rule_id       = (known after apply)
      [32m+[0m[0m tags_all                     = {}
      [32m+[0m[0m to_port                      = 8080
    }

[1m  # module.environment_test[0].aws_vpc_security_group_ingress_rule.delius_db_security_group_ingress_bastion[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_ingress_rule" "delius_db_security_group_ingress_bastion" {
      [32m+[0m[0m arn                          = (known after apply)
      [32m+[0m[0m description                  = "bastion to testing db"
      [32m+[0m[0m from_port                    = 1521
      [32m+[0m[0m id                           = (known after apply)
      [32m+[0m[0m ip_protocol                  = "tcp"
      [32m+[0m[0m referenced_security_group_id = "sg-04c062a3870d26740"
      [32m+[0m[0m security_group_id            = (known after apply)
      [32m+[0m[0m security_group_rule_id       = (known after apply)
      [32m+[0m[0m tags_all                     = {}
      [32m+[0m[0m to_port                      = 1521
    }

[1m  # module.environment_test[0].aws_vpc_security_group_ingress_rule.delius_db_security_group_ingress_private_subnets[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_ingress_rule" "delius_db_security_group_ingress_private_subnets" {
      [32m+[0m[0m arn                          = (known after apply)
      [32m+[0m[0m description                  = "weblogic to testing db"
      [32m+[0m[0m from_port                    = 1521
      [32m+[0m[0m id                           = (known after apply)
      [32m+[0m[0m ip_protocol                  = "tcp"
      [32m+[0m[0m referenced_security_group_id = (known after apply)
      [32m+[0m[0m security_group_id            = (known after apply)
      [32m+[0m[0m security_group_rule_id       = (known after apply)
      [32m+[0m[0m tags_all                     = {}
      [32m+[0m[0m to_port                      = 1521
    }

[1m  # module.environment_test[0].module.ebs_volume["/dev/sdb"].aws_ebs_volume.this[0m will be created
[0m  [32m+[0m[0m resource "aws_ebs_volume" "this" {
      [32m+[0m[0m arn               = (known after apply)
      [32m+[0m[0m availability_zone = (known after apply)
      [32m+[0m[0m encrypted         = true
      [32m+[0m[0m final_snapshot    = false
      [32m+[0m[0m id                = (known after apply)
      [32m+[0m[0m iops              = 3000
      [32m+[0m[0m kms_key_id        = "arn:aws:kms:eu-west-2:374269020027:key/12984197-3371-4c21-8e43-a88a1581e691"
      [32m+[0m[0m size              = 200
      [32m+[0m[0m snapshot_id       = (known after apply)
      [32m+[0m[0m tags              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all          = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m throughput        = 125
      [32m+[0m[0m type              = "gp3"
    }

[1m  # module.environment_test[0].module.ebs_volume["/dev/sdb"].aws_volume_attachment.this[0m will be created
[0m  [32m+[0m[0m resource "aws_volume_attachment" "this" {
      [32m+[0m[0m device_name = "/dev/sdb"
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m instance_id = (known after apply)
      [32m+[0m[0m volume_id   = (known after apply)
    }

[1m  # module.environment_test[0].module.ebs_volume["/dev/sdc"].aws_ebs_volume.this[0m will be created
[0m  [32m+[0m[0m resource "aws_ebs_volume" "this" {
      [32m+[0m[0m arn               = (known after apply)
      [32m+[0m[0m availability_zone = (known after apply)
      [32m+[0m[0m encrypted         = true
      [32m+[0m[0m final_snapshot    = false
      [32m+[0m[0m id                = (known after apply)
      [32m+[0m[0m iops              = 3000
      [32m+[0m[0m kms_key_id        = "arn:aws:kms:eu-west-2:374269020027:key/12984197-3371-4c21-8e43-a88a1581e691"
      [32m+[0m[0m size              = 100
      [32m+[0m[0m snapshot_id       = (known after apply)
      [32m+[0m[0m tags              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all          = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m throughput        = 125
      [32m+[0m[0m type              = "gp3"
    }

[1m  # module.environment_test[0].module.ebs_volume["/dev/sdc"].aws_volume_attachment.this[0m will be created
[0m  [32m+[0m[0m resource "aws_volume_attachment" "this" {
      [32m+[0m[0m device_name = "/dev/sdc"
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m instance_id = (known after apply)
      [32m+[0m[0m volume_id   = (known after apply)
    }

[1m  # module.environment_test[0].module.ebs_volume["/dev/sde"].aws_ebs_volume.this[0m will be created
[0m  [32m+[0m[0m resource "aws_ebs_volume" "this" {
      [32m+[0m[0m arn               = (known after apply)
      [32m+[0m[0m availability_zone = (known after apply)
      [32m+[0m[0m encrypted         = true
      [32m+[0m[0m final_snapshot    = false
      [32m+[0m[0m id                = (known after apply)
      [32m+[0m[0m iops              = 3000
      [32m+[0m[0m kms_key_id        = "arn:aws:kms:eu-west-2:374269020027:key/12984197-3371-4c21-8e43-a88a1581e691"
      [32m+[0m[0m size              = 500
      [32m+[0m[0m snapshot_id       = (known after apply)
      [32m+[0m[0m tags              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all          = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m throughput        = 125
      [32m+[0m[0m type              = "gp3"
    }

[1m  # module.environment_test[0].module.ebs_volume["/dev/sde"].aws_volume_attachment.this[0m will be created
[0m  [32m+[0m[0m resource "aws_volume_attachment" "this" {
      [32m+[0m[0m device_name = "/dev/sde"
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m instance_id = (known after apply)
      [32m+[0m[0m volume_id   = (known after apply)
    }

[1m  # module.environment_test[0].module.ebs_volume["/dev/sdj"].aws_ebs_volume.this[0m will be created
[0m  [32m+[0m[0m resource "aws_ebs_volume" "this" {
      [32m+[0m[0m arn               = (known after apply)
      [32m+[0m[0m availability_zone = (known after apply)
      [32m+[0m[0m encrypted         = true
      [32m+[0m[0m final_snapshot    = false
      [32m+[0m[0m id                = (known after apply)
      [32m+[0m[0m iops              = 3000
      [32m+[0m[0m kms_key_id        = "arn:aws:kms:eu-west-2:374269020027:key/12984197-3371-4c21-8e43-a88a1581e691"
      [32m+[0m[0m size              = 500
      [32m+[0m[0m snapshot_id       = (known after apply)
      [32m+[0m[0m tags              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all          = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m throughput        = 125
      [32m+[0m[0m type              = "gp3"
    }

[1m  # module.environment_test[0].module.ebs_volume["/dev/sdj"].aws_volume_attachment.this[0m will be created
[0m  [32m+[0m[0m resource "aws_volume_attachment" "this" {
      [32m+[0m[0m device_name = "/dev/sdj"
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m instance_id = (known after apply)
      [32m+[0m[0m volume_id   = (known after apply)
    }

[1m  # module.environment_test[0].module.ebs_volume["/dev/sds"].aws_ebs_volume.this[0m will be created
[0m  [32m+[0m[0m resource "aws_ebs_volume" "this" {
      [32m+[0m[0m arn               = (known after apply)
      [32m+[0m[0m availability_zone = (known after apply)
      [32m+[0m[0m encrypted         = true
      [32m+[0m[0m final_snapshot    = false
      [32m+[0m[0m id                = (known after apply)
      [32m+[0m[0m iops              = 3000
      [32m+[0m[0m kms_key_id        = "arn:aws:kms:eu-west-2:374269020027:key/12984197-3371-4c21-8e43-a88a1581e691"
      [32m+[0m[0m size              = 4
      [32m+[0m[0m snapshot_id       = (known after apply)
      [32m+[0m[0m tags              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all          = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m throughput        = 125
      [32m+[0m[0m type              = "gp3"
    }

[1m  # module.environment_test[0].module.ebs_volume["/dev/sds"].aws_volume_attachment.this[0m will be created
[0m  [32m+[0m[0m resource "aws_volume_attachment" "this" {
      [32m+[0m[0m device_name = "/dev/sds"
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m instance_id = (known after apply)
      [32m+[0m[0m volume_id   = (known after apply)
    }

[1m  # module.environment_test[0].module.ldap_ecs_policies.aws_iam_role.service[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "service" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = "ecs.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "test-openldap-ecs-service"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m unique_id             = (known after apply)
    }

[1m  # module.environment_test[0].module.ldap_ecs_policies.aws_iam_role.task[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "task" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = "ecs-tasks.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "test-openldap-ecs-task"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m unique_id             = (known after apply)
    }

[1m  # module.environment_test[0].module.ldap_ecs_policies.aws_iam_role.task_exec[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "task_exec" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = "ecs-tasks.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "test-openldap-task-exec"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m unique_id             = (known after apply)
    }

[1m  # module.environment_test[0].module.ldap_ecs_policies.aws_iam_role_policy.service_policy[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "service_policy" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "test-openldap-service"
      [32m+[0m[0m policy = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "elasticloadbalancing:RegisterTargets",
                          [32m+[0m[0m "elasticloadbalancing:RegisterInstancesWithLoadBalancer",
                          [32m+[0m[0m "elasticloadbalancing:Describe*",
                          [32m+[0m[0m "elasticloadbalancing:DeregisterTargets",
                          [32m+[0m[0m "elasticloadbalancing:DeregisterInstancesFromLoadBalancer",
                          [32m+[0m[0m "ec2:Describe*",
                          [32m+[0m[0m "ec2:AuthorizeSecurityGroupIngress",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "*"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role   = (known after apply)
    }

[1m  # module.environment_test[0].module.ldap_ecs_policies.aws_iam_role_policy.ssm_exec[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "ssm_exec" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "test-openldap-service-ssm-exec"
      [32m+[0m[0m policy = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "ssmmessages:OpenDataChannel",
                          [32m+[0m[0m "ssmmessages:OpenControlChannel",
                          [32m+[0m[0m "ssmmessages:CreateDataChannel",
                          [32m+[0m[0m "ssmmessages:CreateControlChannel",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "*"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role   = (known after apply)
    }

[1m  # module.environment_test[0].module.ldap_ecs_policies.aws_iam_role_policy.task_actions["migration_s3"][0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "task_actions" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "test-openldap-ecs-task-actions-migration_s3"
      [32m+[0m[0m policy = (known after apply)
      [32m+[0m[0m role   = (known after apply)
    }

[1m  # module.environment_test[0].module.ldap_ecs_policies.aws_iam_role_policy.task_exec[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "task_exec" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "test-openldap-task-exec"
      [32m+[0m[0m policy = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "ssm:GetParameters",
                          [32m+[0m[0m "secretsmanager:GetSecretValue",
                          [32m+[0m[0m "logs:PutLogEvents",
                          [32m+[0m[0m "logs:CreateLogStream",
                          [32m+[0m[0m "logs:CreateLogGroup",
                          [32m+[0m[0m "elasticfilesystem:ClientWrite",
                          [32m+[0m[0m "elasticfilesystem:ClientRootAccess",
                          [32m+[0m[0m "elasticfilesystem:ClientMount",
                          [32m+[0m[0m "ecr:GetDownloadUrlForLayer",
                          [32m+[0m[0m "ecr:GetAuthorizationToken",
                          [32m+[0m[0m "ecr:BatchGetImage",
                          [32m+[0m[0m "ecr:BatchCheckLayerAvailability",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "*"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role   = (known after apply)
    }

[1m  # module.environment_test[0].module.s3_bucket_app_deployment.data.aws_iam_policy_document.bucket_policy_v2[0m will be read during apply
  # (depends on a resource or a module with changes pending)
[0m [36m<=[0m[0m data "aws_iam_policy_document" "bucket_policy_v2" {
      [32m+[0m[0m id   = (known after apply)
      [32m+[0m[0m json = (known after apply)
    }

[1m  # module.environment_test[0].module.s3_bucket_app_deployment.data.aws_iam_policy_document.default[0m will be read during apply
  # (config refers to values not yet known)
[0m [36m<=[0m[0m data "aws_iam_policy_document" "default" {
      [32m+[0m[0m id                        = (known after apply)
      [32m+[0m[0m json                      = (known after apply)
      [32m+[0m[0m override_policy_documents = [
          [32m+[0m[0m jsonencode({}),
          [32m+[0m[0m (known after apply),
        ]

      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3:*",
            ]
          [32m+[0m[0m effect    = "Deny"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
              [32m+[0m[0m (known after apply),
            ]

          [32m+[0m[0m condition {
              [32m+[0m[0m test     = "Bool"
              [32m+[0m[0m values   = [
                  [32m+[0m[0m "false",
                ]
              [32m+[0m[0m variable = "aws:SecureTransport"
            }

          [32m+[0m[0m principals {
              [32m+[0m[0m identifiers = [
                  [32m+[0m[0m "*",
                ]
              [32m+[0m[0m type        = "AWS"
            }
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_app_deployment.aws_s3_bucket.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket" "default" {
      [32m+[0m[0m acceleration_status         = (known after apply)
      [32m+[0m[0m acl                         = (known after apply)
      [32m+[0m[0m arn                         = (known after apply)
      [32m+[0m[0m bucket                      = "delius-core-test-openldap-deployment"
      [32m+[0m[0m bucket_domain_name          = (known after apply)
      [32m+[0m[0m bucket_prefix               = (known after apply)
      [32m+[0m[0m bucket_regional_domain_name = (known after apply)
      [32m+[0m[0m force_destroy               = false
      [32m+[0m[0m hosted_zone_id              = (known after apply)
      [32m+[0m[0m id                          = (known after apply)
      [32m+[0m[0m object_lock_enabled         = (known after apply)
      [32m+[0m[0m policy                      = (known after apply)
      [32m+[0m[0m region                      = (known after apply)
      [32m+[0m[0m request_payer               = (known after apply)
      [32m+[0m[0m tags                        = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all                    = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m website_domain              = (known after apply)
      [32m+[0m[0m website_endpoint            = (known after apply)
    }

[1m  # module.environment_test[0].module.s3_bucket_app_deployment.aws_s3_bucket_acl.default[0][0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_acl" "default" {
      [32m+[0m[0m acl    = "private"
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)
    }

[1m  # module.environment_test[0].module.s3_bucket_app_deployment.aws_s3_bucket_lifecycle_configuration.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_lifecycle_configuration" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m rule {
          [32m+[0m[0m id     = "main"
          [32m+[0m[0m status = "Enabled"

          [32m+[0m[0m abort_incomplete_multipart_upload {
              [32m+[0m[0m days_after_initiation = 7
            }

          [32m+[0m[0m filter {
            }

          [32m+[0m[0m noncurrent_version_expiration {
              [32m+[0m[0m noncurrent_days = 730
            }

          [32m+[0m[0m noncurrent_version_transition {
              [32m+[0m[0m noncurrent_days = 365
              [32m+[0m[0m storage_class   = "GLACIER"
            }
          [32m+[0m[0m noncurrent_version_transition {
              [32m+[0m[0m noncurrent_days = 90
              [32m+[0m[0m storage_class   = "STANDARD_IA"
            }
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_app_deployment.aws_s3_bucket_ownership_controls.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_ownership_controls" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m rule {
          [32m+[0m[0m object_ownership = "ObjectWriter"
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_app_deployment.aws_s3_bucket_policy.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_policy" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m policy = (known after apply)
    }

[1m  # module.environment_test[0].module.s3_bucket_app_deployment.aws_s3_bucket_public_access_block.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_public_access_block" "default" {
      [32m+[0m[0m block_public_acls       = true
      [32m+[0m[0m block_public_policy     = true
      [32m+[0m[0m bucket                  = "delius-core-test-openldap-deployment"
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m ignore_public_acls      = true
      [32m+[0m[0m restrict_public_buckets = true
    }

[1m  # module.environment_test[0].module.s3_bucket_app_deployment.aws_s3_bucket_server_side_encryption_configuration.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_server_side_encryption_configuration" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m rule {
          [32m+[0m[0m apply_server_side_encryption_by_default {
              [32m+[0m[0m sse_algorithm = "aws:kms"
            }
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_app_deployment.aws_s3_bucket_versioning.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_versioning" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m versioning_configuration {
          [32m+[0m[0m mfa_delete = (known after apply)
          [32m+[0m[0m status     = "Enabled"
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_ldap_deployment.data.aws_iam_policy_document.bucket_policy_v2[0m will be read during apply
  # (depends on a resource or a module with changes pending)
[0m [36m<=[0m[0m data "aws_iam_policy_document" "bucket_policy_v2" {
      [32m+[0m[0m id   = (known after apply)
      [32m+[0m[0m json = (known after apply)
    }

[1m  # module.environment_test[0].module.s3_bucket_ldap_deployment.data.aws_iam_policy_document.default[0m will be read during apply
  # (config refers to values not yet known)
[0m [36m<=[0m[0m data "aws_iam_policy_document" "default" {
      [32m+[0m[0m id                        = (known after apply)
      [32m+[0m[0m json                      = (known after apply)
      [32m+[0m[0m override_policy_documents = [
          [32m+[0m[0m jsonencode({}),
          [32m+[0m[0m (known after apply),
        ]

      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3:*",
            ]
          [32m+[0m[0m effect    = "Deny"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
              [32m+[0m[0m (known after apply),
            ]

          [32m+[0m[0m condition {
              [32m+[0m[0m test     = "Bool"
              [32m+[0m[0m values   = [
                  [32m+[0m[0m "false",
                ]
              [32m+[0m[0m variable = "aws:SecureTransport"
            }

          [32m+[0m[0m principals {
              [32m+[0m[0m identifiers = [
                  [32m+[0m[0m "*",
                ]
              [32m+[0m[0m type        = "AWS"
            }
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_ldap_deployment.aws_s3_bucket.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket" "default" {
      [32m+[0m[0m acceleration_status         = (known after apply)
      [32m+[0m[0m acl                         = (known after apply)
      [32m+[0m[0m arn                         = (known after apply)
      [32m+[0m[0m bucket                      = (known after apply)
      [32m+[0m[0m bucket_domain_name          = (known after apply)
      [32m+[0m[0m bucket_prefix               = "test-ldap-deployment-"
      [32m+[0m[0m bucket_regional_domain_name = (known after apply)
      [32m+[0m[0m force_destroy               = false
      [32m+[0m[0m hosted_zone_id              = (known after apply)
      [32m+[0m[0m id                          = (known after apply)
      [32m+[0m[0m object_lock_enabled         = (known after apply)
      [32m+[0m[0m policy                      = (known after apply)
      [32m+[0m[0m region                      = (known after apply)
      [32m+[0m[0m request_payer               = (known after apply)
      [32m+[0m[0m tags                        = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all                    = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m website_domain              = (known after apply)
      [32m+[0m[0m website_endpoint            = (known after apply)
    }

[1m  # module.environment_test[0].module.s3_bucket_ldap_deployment.aws_s3_bucket_acl.default[0][0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_acl" "default" {
      [32m+[0m[0m acl    = "private"
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)
    }

[1m  # module.environment_test[0].module.s3_bucket_ldap_deployment.aws_s3_bucket_lifecycle_configuration.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_lifecycle_configuration" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m rule {
          [32m+[0m[0m id     = "main"
          [32m+[0m[0m status = "Enabled"

          [32m+[0m[0m abort_incomplete_multipart_upload {
              [32m+[0m[0m days_after_initiation = 7
            }

          [32m+[0m[0m filter {
            }

          [32m+[0m[0m noncurrent_version_expiration {
              [32m+[0m[0m noncurrent_days = 730
            }

          [32m+[0m[0m noncurrent_version_transition {
              [32m+[0m[0m noncurrent_days = 365
              [32m+[0m[0m storage_class   = "GLACIER"
            }
          [32m+[0m[0m noncurrent_version_transition {
              [32m+[0m[0m noncurrent_days = 90
              [32m+[0m[0m storage_class   = "STANDARD_IA"
            }
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_ldap_deployment.aws_s3_bucket_ownership_controls.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_ownership_controls" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m rule {
          [32m+[0m[0m object_ownership = "ObjectWriter"
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_ldap_deployment.aws_s3_bucket_policy.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_policy" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m policy = (known after apply)
    }

[1m  # module.environment_test[0].module.s3_bucket_ldap_deployment.aws_s3_bucket_public_access_block.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_public_access_block" "default" {
      [32m+[0m[0m block_public_acls       = true
      [32m+[0m[0m block_public_policy     = true
      [32m+[0m[0m bucket                  = (known after apply)
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m ignore_public_acls      = true
      [32m+[0m[0m restrict_public_buckets = true
    }

[1m  # module.environment_test[0].module.s3_bucket_ldap_deployment.aws_s3_bucket_server_side_encryption_configuration.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_server_side_encryption_configuration" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m rule {
          [32m+[0m[0m apply_server_side_encryption_by_default {
              [32m+[0m[0m sse_algorithm = "aws:kms"
            }
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_ldap_deployment.aws_s3_bucket_versioning.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_versioning" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m versioning_configuration {
          [32m+[0m[0m mfa_delete = (known after apply)
          [32m+[0m[0m status     = "Enabled"
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_migration.data.aws_iam_policy_document.bucket_policy_v2[0m will be read during apply
  # (config refers to values not yet known)
[0m [36m<=[0m[0m data "aws_iam_policy_document" "bucket_policy_v2" {
      [32m+[0m[0m id   = (known after apply)
      [32m+[0m[0m json = (known after apply)

      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3:AbortMultipartUpload",
              [32m+[0m[0m "s3:DeleteObject",
              [32m+[0m[0m "s3:GetBucketLocation",
              [32m+[0m[0m "s3:GetObject",
              [32m+[0m[0m "s3:GetObjectTagging",
              [32m+[0m[0m "s3:ListBucket",
              [32m+[0m[0m "s3:ListBucketMultipartUploads",
              [32m+[0m[0m "s3:ListMultipartUploadParts",
              [32m+[0m[0m "s3:PutObject",
              [32m+[0m[0m "s3:PutObjectTagging",
            ]
          [32m+[0m[0m effect    = "Allow"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
              [32m+[0m[0m (known after apply),
            ]

          [32m+[0m[0m principals {
              [32m+[0m[0m identifiers = [
                  [32m+[0m[0m "arn:aws:iam::010587221707:role/ldap-data-migration-lambda-role",
                ]
              [32m+[0m[0m type        = "AWS"
            }
        }
      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3:ListBucket",
            ]
          [32m+[0m[0m effect    = "Allow"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
              [32m+[0m[0m (known after apply),
            ]

          [32m+[0m[0m principals {
              [32m+[0m[0m identifiers = [
                  [32m+[0m[0m "arn:aws:iam::010587221707:role/terraform",
                ]
              [32m+[0m[0m type        = "AWS"
            }
        }
      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3:ListBucket",
            ]
          [32m+[0m[0m effect    = "Allow"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
              [32m+[0m[0m (known after apply),
            ]

          [32m+[0m[0m principals {
              [32m+[0m[0m identifiers = [
                  [32m+[0m[0m "arn:aws:iam::010587221707:role/admin",
                ]
              [32m+[0m[0m type        = "AWS"
            }
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_migration.data.aws_iam_policy_document.default[0m will be read during apply
  # (config refers to values not yet known)
[0m [36m<=[0m[0m data "aws_iam_policy_document" "default" {
      [32m+[0m[0m id                        = (known after apply)
      [32m+[0m[0m json                      = (known after apply)
      [32m+[0m[0m override_policy_documents = [
          [32m+[0m[0m jsonencode({}),
          [32m+[0m[0m (known after apply),
        ]

      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3:*",
            ]
          [32m+[0m[0m effect    = "Deny"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
              [32m+[0m[0m (known after apply),
            ]

          [32m+[0m[0m condition {
              [32m+[0m[0m test     = "Bool"
              [32m+[0m[0m values   = [
                  [32m+[0m[0m "false",
                ]
              [32m+[0m[0m variable = "aws:SecureTransport"
            }

          [32m+[0m[0m principals {
              [32m+[0m[0m identifiers = [
                  [32m+[0m[0m "*",
                ]
              [32m+[0m[0m type        = "AWS"
            }
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_migration.aws_s3_bucket.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket" "default" {
      [32m+[0m[0m acceleration_status         = (known after apply)
      [32m+[0m[0m acl                         = (known after apply)
      [32m+[0m[0m arn                         = (known after apply)
      [32m+[0m[0m bucket                      = (known after apply)
      [32m+[0m[0m bucket_domain_name          = (known after apply)
      [32m+[0m[0m bucket_prefix               = "delius-core-test-ldap-"
      [32m+[0m[0m bucket_regional_domain_name = (known after apply)
      [32m+[0m[0m force_destroy               = false
      [32m+[0m[0m hosted_zone_id              = (known after apply)
      [32m+[0m[0m id                          = (known after apply)
      [32m+[0m[0m object_lock_enabled         = (known after apply)
      [32m+[0m[0m policy                      = (known after apply)
      [32m+[0m[0m region                      = (known after apply)
      [32m+[0m[0m request_payer               = (known after apply)
      [32m+[0m[0m tags                        = {
          [32m+[0m[0m "Name"                    = "test-ldap-migration-s3-bucket"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all                    = {
          [32m+[0m[0m "Name"                    = "test-ldap-migration-s3-bucket"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m website_domain              = (known after apply)
      [32m+[0m[0m website_endpoint            = (known after apply)
    }

[1m  # module.environment_test[0].module.s3_bucket_migration.aws_s3_bucket_lifecycle_configuration.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_lifecycle_configuration" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m rule {
          [32m+[0m[0m id     = "main"
          [32m+[0m[0m status = "Enabled"

          [32m+[0m[0m abort_incomplete_multipart_upload {
              [32m+[0m[0m days_after_initiation = 7
            }

          [32m+[0m[0m filter {
            }

          [32m+[0m[0m noncurrent_version_expiration {
              [32m+[0m[0m noncurrent_days = 365
            }

          [32m+[0m[0m noncurrent_version_transition {
              [32m+[0m[0m noncurrent_days = 120
              [32m+[0m[0m storage_class   = "STANDARD_IA"
            }
          [32m+[0m[0m noncurrent_version_transition {
              [32m+[0m[0m noncurrent_days = 180
              [32m+[0m[0m storage_class   = "GLACIER"
            }
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_migration.aws_s3_bucket_ownership_controls.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_ownership_controls" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m rule {
          [32m+[0m[0m object_ownership = "BucketOwnerEnforced"
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_migration.aws_s3_bucket_policy.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_policy" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m policy = (known after apply)
    }

[1m  # module.environment_test[0].module.s3_bucket_migration.aws_s3_bucket_public_access_block.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_public_access_block" "default" {
      [32m+[0m[0m block_public_acls       = true
      [32m+[0m[0m block_public_policy     = true
      [32m+[0m[0m bucket                  = (known after apply)
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m ignore_public_acls      = true
      [32m+[0m[0m restrict_public_buckets = true
    }

[1m  # module.environment_test[0].module.s3_bucket_migration.aws_s3_bucket_server_side_encryption_configuration.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_server_side_encryption_configuration" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m rule {
          [32m+[0m[0m apply_server_side_encryption_by_default {
              [32m+[0m[0m sse_algorithm = "AES256"
            }
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_migration.aws_s3_bucket_versioning.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_versioning" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m versioning_configuration {
          [32m+[0m[0m mfa_delete = (known after apply)
          [32m+[0m[0m status     = "Enabled"
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_oracledb_backups.data.aws_iam_policy_document.bucket_policy_v2[0m will be read during apply
  # (depends on a resource or a module with changes pending)
[0m [36m<=[0m[0m data "aws_iam_policy_document" "bucket_policy_v2" {
      [32m+[0m[0m id   = (known after apply)
      [32m+[0m[0m json = (known after apply)
    }

[1m  # module.environment_test[0].module.s3_bucket_oracledb_backups.data.aws_iam_policy_document.default[0m will be read during apply
  # (config refers to values not yet known)
[0m [36m<=[0m[0m data "aws_iam_policy_document" "default" {
      [32m+[0m[0m id                        = (known after apply)
      [32m+[0m[0m json                      = (known after apply)
      [32m+[0m[0m override_policy_documents = [
          [32m+[0m[0m jsonencode({}),
          [32m+[0m[0m (known after apply),
        ]

      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3:*",
            ]
          [32m+[0m[0m effect    = "Deny"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
              [32m+[0m[0m (known after apply),
            ]

          [32m+[0m[0m condition {
              [32m+[0m[0m test     = "Bool"
              [32m+[0m[0m values   = [
                  [32m+[0m[0m "false",
                ]
              [32m+[0m[0m variable = "aws:SecureTransport"
            }

          [32m+[0m[0m principals {
              [32m+[0m[0m identifiers = [
                  [32m+[0m[0m "*",
                ]
              [32m+[0m[0m type        = "AWS"
            }
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_oracledb_backups.aws_s3_bucket.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket" "default" {
      [32m+[0m[0m acceleration_status         = (known after apply)
      [32m+[0m[0m acl                         = (known after apply)
      [32m+[0m[0m arn                         = (known after apply)
      [32m+[0m[0m bucket                      = "test-oracle-database-backups"
      [32m+[0m[0m bucket_domain_name          = (known after apply)
      [32m+[0m[0m bucket_prefix               = (known after apply)
      [32m+[0m[0m bucket_regional_domain_name = (known after apply)
      [32m+[0m[0m force_destroy               = false
      [32m+[0m[0m hosted_zone_id              = (known after apply)
      [32m+[0m[0m id                          = (known after apply)
      [32m+[0m[0m object_lock_enabled         = (known after apply)
      [32m+[0m[0m policy                      = (known after apply)
      [32m+[0m[0m region                      = (known after apply)
      [32m+[0m[0m request_payer               = (known after apply)
      [32m+[0m[0m tags                        = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all                    = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m website_domain              = (known after apply)
      [32m+[0m[0m website_endpoint            = (known after apply)
    }

[1m  # module.environment_test[0].module.s3_bucket_oracledb_backups.aws_s3_bucket_lifecycle_configuration.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_lifecycle_configuration" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m rule {
          [32m+[0m[0m id     = "main"
          [32m+[0m[0m status = "Enabled"

          [32m+[0m[0m abort_incomplete_multipart_upload {
              [32m+[0m[0m days_after_initiation = 7
            }

          [32m+[0m[0m expiration {
              [32m+[0m[0m days                         = 365
              [32m+[0m[0m expired_object_delete_marker = (known after apply)
            }

          [32m+[0m[0m filter {
            }

          [32m+[0m[0m transition {
              [32m+[0m[0m days          = 90
              [32m+[0m[0m storage_class = "STANDARD_IA"
            }
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_oracledb_backups.aws_s3_bucket_ownership_controls.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_ownership_controls" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m rule {
          [32m+[0m[0m object_ownership = "BucketOwnerEnforced"
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_oracledb_backups.aws_s3_bucket_policy.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_policy" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m policy = (known after apply)
    }

[1m  # module.environment_test[0].module.s3_bucket_oracledb_backups.aws_s3_bucket_public_access_block.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_public_access_block" "default" {
      [32m+[0m[0m block_public_acls       = true
      [32m+[0m[0m block_public_policy     = true
      [32m+[0m[0m bucket                  = "test-oracle-database-backups"
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m ignore_public_acls      = true
      [32m+[0m[0m restrict_public_buckets = true
    }

[1m  # module.environment_test[0].module.s3_bucket_oracledb_backups.aws_s3_bucket_server_side_encryption_configuration.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_server_side_encryption_configuration" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m rule {
          [32m+[0m[0m apply_server_side_encryption_by_default {
              [32m+[0m[0m kms_master_key_id = "arn:aws:kms:eu-west-2:374269020027:key/90121e65-c5fa-43a9-8075-6f3410d2a025"
              [32m+[0m[0m sse_algorithm     = "aws:kms"
            }
        }
    }

[1m  # module.environment_test[0].module.s3_bucket_oracledb_backups.aws_s3_bucket_versioning.default[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_versioning" "default" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m versioning_configuration {
          [32m+[0m[0m mfa_delete = (known after apply)
          [32m+[0m[0m status     = "Suspended"
        }
    }

[1m  # module.environment_test[0].module.weblogic_ecs_policies.aws_iam_role.service[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "service" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = "ecs.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "test-weblogic-ecs-service"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m unique_id             = (known after apply)
    }

[1m  # module.environment_test[0].module.weblogic_ecs_policies.aws_iam_role.task[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "task" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = "ecs-tasks.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "test-weblogic-ecs-task"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m unique_id             = (known after apply)
    }

[1m  # module.environment_test[0].module.weblogic_ecs_policies.aws_iam_role.task_exec[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "task_exec" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = "ecs-tasks.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "test-weblogic-task-exec"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m unique_id             = (known after apply)
    }

[1m  # module.environment_test[0].module.weblogic_ecs_policies.aws_iam_role_policy.service_policy[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "service_policy" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "test-weblogic-service"
      [32m+[0m[0m policy = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "elasticloadbalancing:RegisterTargets",
                          [32m+[0m[0m "elasticloadbalancing:RegisterInstancesWithLoadBalancer",
                          [32m+[0m[0m "elasticloadbalancing:Describe*",
                          [32m+[0m[0m "elasticloadbalancing:DeregisterTargets",
                          [32m+[0m[0m "elasticloadbalancing:DeregisterInstancesFromLoadBalancer",
                          [32m+[0m[0m "ec2:Describe*",
                          [32m+[0m[0m "ec2:AuthorizeSecurityGroupIngress",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "*"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role   = (known after apply)
    }

[1m  # module.environment_test[0].module.weblogic_ecs_policies.aws_iam_role_policy.ssm_exec[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "ssm_exec" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "test-weblogic-service-ssm-exec"
      [32m+[0m[0m policy = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "ssmmessages:OpenDataChannel",
                          [32m+[0m[0m "ssmmessages:OpenControlChannel",
                          [32m+[0m[0m "ssmmessages:CreateDataChannel",
                          [32m+[0m[0m "ssmmessages:CreateControlChannel",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "*"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role   = (known after apply)
    }

[1m  # module.environment_test[0].module.weblogic_ecs_policies.aws_iam_role_policy.task_exec[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "task_exec" {
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m name   = "test-weblogic-task-exec"
      [32m+[0m[0m policy = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "ssm:GetParameters",
                          [32m+[0m[0m "secretsmanager:GetSecretValue",
                          [32m+[0m[0m "logs:PutLogEvents",
                          [32m+[0m[0m "logs:CreateLogStream",
                          [32m+[0m[0m "logs:CreateLogGroup",
                          [32m+[0m[0m "ecr:GetDownloadUrlForLayer",
                          [32m+[0m[0m "ecr:GetAuthorizationToken",
                          [32m+[0m[0m "ecr:BatchGetImage",
                          [32m+[0m[0m "ecr:BatchCheckLayerAvailability",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "*"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role   = (known after apply)
    }

[1m  # module.environment_test[0].module.ecs.module.ecs_cluster.aws_ecs_cluster.default[0][0m will be created
[0m  [32m+[0m[0m resource "aws_ecs_cluster" "default" {
      [32m+[0m[0m arn      = (known after apply)
      [32m+[0m[0m id       = (known after apply)
      [32m+[0m[0m name     = "delius-core-test-cluster"
      [32m+[0m[0m tags     = {
          [32m+[0m[0m "Environment"             = "test"
          [32m+[0m[0m "Name"                    = "delius-core-test-cluster"
          [32m+[0m[0m "Namespace"               = "delius-core"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }
      [32m+[0m[0m tags_all = {
          [32m+[0m[0m "Environment"             = "test"
          [32m+[0m[0m "Name"                    = "delius-core-test-cluster"
          [32m+[0m[0m "Namespace"               = "delius-core"
          [32m+[0m[0m "application"             = "delius-core"
          [32m+[0m[0m "business-unit"           = "HMPPS"
          [32m+[0m[0m "delius-environment-name" = "test"
          [32m+[0m[0m "environment-name"        = "delius-core-development"
          [32m+[0m[0m "infrastructure-support"  = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "is-production"           = "false"
          [32m+[0m[0m "owner"                   = "probation-webops@digital.justice.gov.uk"
          [32m+[0m[0m "source-code"             = "https://github.com/ministryofjustice/modernisation-platform-environments"
        }

      [32m+[0m[0m configuration {
          [32m+[0m[0m execute_command_configuration {
              [32m+[0m[0m logging = "DEFAULT"
            }
        }

      [32m+[0m[0m setting {
          [32m+[0m[0m name  = "containerInsights"
          [32m+[0m[0m value = "enabled"
        }
    }

[1m  # module.environment_test[0].module.ecs.module.ecs_cluster.aws_ecs_cluster_capacity_providers.default[0][0m will be created
[0m  [32m+[0m[0m resource "aws_ecs_cluster_capacity_providers" "default" {
      [32m+[0m[0m capacity_providers = [
          [32m+[0m[0m "FARGATE",
          [32m+[0m[0m "FARGATE_SPOT",
        ]
      [32m+[0m[0m cluster_name       = "delius-core-test-cluster"
      [32m+[0m[0m id                 = (known after apply)
    }

[1m  # module.environment_test[0].module.ecs.module.ecs_cluster.aws_iam_instance_profile.default[0][0m will be created
[0m  [32m+[0m[0m resource "aws_iam_instance_profile" "default" {
      [32m+[0m[0m arn         = (known after apply)
      [32m+[0m[0m create_date = (known after apply)
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m name        = "delius-core-test-cluster"
      [32m+[0m[0m name_prefix = (known after apply)
      [32m+[0m[0m path        = "/"
      [32m+[0m[0m role        = "delius-core-test-cluster"
      [32m+[0m[0m tags_all    = (known after apply)
      [32m+[0m[0m unique_id   = (known after apply)
    }

[1m  # module.environment_test[0].module.ecs.module.ecs_cluster.aws_iam_role.default[0][0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "default" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = "ec2.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "delius-core-test-cluster"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags_all              = (known after apply)
      [32m+[0m[0m unique_id             = (known after apply)
    }

[1m  # module.environment_test[0].module.ecs.module.ecs_cluster.aws_iam_role_policy_attachment.default["AmazonSSMManagedInstanceCore"][0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "default" {
      [32m+[0m[0m id         = (known after apply)
      [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"
      [32m+[0m[0m role       = "delius-core-test-cluster"
    }

[1m  # module.environment_test[0].module.ecs.module.ecs_cluster.aws_iam_role_policy_attachment.default["service-role/AmazonEC2ContainerServiceforEC2Role"][0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "default" {
      [32m+[0m[0m id         = (known after apply)
      [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/service-role/AmazonEC2ContainerServiceforEC2Role"
      [32m+[0m[0m role       = "delius-core-test-cluster"
    }

[1m  # module.environment_test[0].module.ecs.module.ecs_cluster.aws_iam_role_policy_attachment.default["service-role/AmazonECSTaskExecutionRolePolicy"][0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "default" {
      [32m+[0m[0m id         = (known after apply)
      [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
      [32m+[0m[0m role       = "delius-core-test-cluster"
    }

[1m  # module.environment_test[0].module.weblogic_service.module.ecs_alb_service_task.aws_ecs_service.ignore_changes_task_definition[0][0m will be created
[0m  [32m+[0m[0m resource "aws_ecs_service" "ignore_changes_task_definition" {
      [32m+[0m[0m cluster                            = (known after apply)
      [32m+[0m[0m deployment_maximum_percent         = 200
      [32m+[0m[0m deployment_minimum_healthy_percent = 100
      [32m+[0m[0m desired_count                      = 1
      [32m+[0m[0m enable_ecs_managed_tags            = false
      [32m+[0m[0m enable_execute_command             = true
      [32m+[0m[0m force_new_deployment               = false
      [32m+[0m[0m health_check_grace_period_seconds  = 0
      [32m+[0m[0m iam_role                           = (known after apply)
      [32m+[0m[0m id                                 = (known after apply)
      [32m+[0m[0m launch_type                        = "FARGATE"
      [32m+[0m[0m name                               = "delius-core-test-weblogic"
      [32m+[0m[0m platform_version                   = "LATEST"
      [32m+[0m[0m propagate_tags                     = "SERVICE"
      [32m+[0m[0m scheduling_strategy                = "REPLICA"
      [32m+[0m[0m tags                               = {
          [32m+[0m[0m "Environment" = "test"
          [32m+[0m[0m "Name"        = "delius-core-test-weblogic"
          [32m+[0m[0m "Namespace"   = "delius-core"
        }
      [32m+[0m[0m tags_all                           = {
          [32m+[0m[0m "Environment" = "test"
          [32m+[0m[0m "Name"        = "delius-core-test-weblogic"
          [32m+[0m[0m "Namespace"   = "delius-core"
        }
      [32m+[0m[0m task_definition                    = (known after apply)
      [32m+[0m[0m triggers                           = (known after apply)
      [32m+[0m[0m wait_for_steady_state              = false

      [32m+[0m[0m deployment_circuit_breaker {
          [32m+[0m[0m enable   = false
          [32m+[0m[0m rollback = false
        }

      [32m+[0m[0m deployment_controller {
          [32m+[0m[0m type = "ECS"
        }

      [32m+[0m[0m load_balancer {
          [32m+[0m[0m container_name   = "test-weblogic"
          [32m+[0m[0m container_port   = 8080
          [32m+[0m[0m target_group_arn = (known after apply)
        }

      [32m+[0m[0m network_configuration {
          [32m+[0m[0m assign_public_ip = false
          [32m+[0m[0m security_groups  = (known after apply)
          [32m+[0m[0m subnets          = [
              [32m+[0m[0m "subnet-0131824ef5a4ece01",
              [32m+[0m[0m "subnet-01815760b71d6a619",
              [32m+[0m[0m "subnet-04af8bd9dbbce3310",
            ]
        }
    }

[1m  # module.environment_test[0].module.weblogic_service.module.ecs_alb_service_task.aws_ecs_task_definition.default[0][0m will be created
[0m  [32m+[0m[0m resource "aws_ecs_task_definition" "default" {
      [32m+[0m[0m arn                      = (known after apply)
      [32m+[0m[0m arn_without_revision     = (known after apply)
      [32m+[0m[0m container_definitions    = (sensitive value)
      [32m+[0m[0m cpu                      = "1024"
      [32m+[0m[0m execution_role_arn       = "arn:aws:iam::326912278139:role/test-weblogic-task-exec"
      [32m+[0m[0m family                   = "delius-core-test-weblogic"
      [32m+[0m[0m id                       = (known after apply)
      [32m+[0m[0m memory                   = "4096"
      [32m+[0m[0m network_mode             = "awsvpc"
      [32m+[0m[0m requires_compatibilities = [
          [32m+[0m[0m "FARGATE",
        ]
      [32m+[0m[0m revision                 = (known after apply)
      [32m+[0m[0m skip_destroy             = false
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "Environment" = "test"
          [32m+[0m[0m "Name"        = "delius-core-test-weblogic"
          [32m+[0m[0m "Namespace"   = "delius-core"
        }
      [32m+[0m[0m tags_all                 = {
          [32m+[0m[0m "Environment" = "test"
          [32m+[0m[0m "Name"        = "delius-core-test-weblogic"
          [32m+[0m[0m "Namespace"   = "delius-core"
        }
      [32m+[0m[0m task_role_arn            = "arn:aws:iam::326912278139:role/test-weblogic-ecs-task"
    }

[1mPlan:[0m 167 to add, 1 to change, 0 to destroy.
[0m